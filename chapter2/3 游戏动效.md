#  3 游戏动效

### 3.0.0 目录

- [<div>3.0.1 弹道特效</div>](#301)

- [<div>3.0.2 发光体特效</div>](#302)

- [<div>3.0.3 游戏流程特效</div>](#303)

- [<div>3.0.4 战斗相关特效</div>](#304)

- [<div>3.0.5 游戏其他的动画效果</div>](#305)

- [<div>3.0.6 所有卡牌的卡牌说明</div>](#306)

- [<div>3.0.7 单位实体或单位卡说明</div>](#307)

- [<div>3.0.8 跳文字</div>](#308)

- [<div>3.0.9 卡牌特效</div>](#309)

  

### 3.0.1 弹道特效<div id='301'>

|    字段名    |             字段              |                             说明                             |        实例        |
| :----------: | :---------------------------: | :----------------------------------------------------------: | :----------------: |
|    弹道id    |       se_trajectory_id        |                              -                               |   trajectory_001   |
|  弹道发起者  |     trajectory_originate      |                      从哪一个单位发起的                      |      unit_001      |
|  发起点位置  | trajectory_originate_position |            从弹道发起者的哪一个位置作为弹道的起始            |    position_03     |
|   弹道目标   |       trajectory_target       |                  弹道的落点目标是哪一个单位                  |      unit_002      |
| 目标落点位置 |  trajectory_target_position   |              以目标单位的哪个位置作为弹道的落点              |    position_03     |
|  弹体预制体  |       trajectory_prefab       |                    弹道的单体使用的预制体                    | trajectory_001.fab |
|   弹道时间   |        trajectory_time        | 弹体从起始位置到落点位置的飞行时间，也是技能实际执行效果或伤害的延迟时间生效 |        0.5         |



### 3.0.2 粒子特效<div id='302'>

|   字段名   |            字段            |                说明                |        实例        |
| :--------: | :------------------------: | :--------------------------------: | :----------------: |
| 粒子特效id |       se_particle_id       |                 -                  |  se_particle_001   |
|  特效目标  |     trajectory_target      |     弹道的落点目标是哪一个单位     |      unit_002      |
|  生效位置  | trajectory_target_position | 以目标单位的哪个位置作为弹道的落点 |    position_03     |
|   预制体   |     trajectory_prefab      |       弹道的单体使用的预制体       | trajectory_001.fab |
|  生效时间  |      trajectory_time       |                                    |        0.5         |





### 3.0.3 游戏流程特效<div id='303'>

1. 进入游戏，首先显示场景，然后第一关的怪物从敌方的空余卡槽中淡入，所有怪同时（动画参考：https://www.bilibili.com/video/BV1vV411r7sb?from=search&seid=12980391035936992906 00:38）
2. 显示【第01关，战备阶段开始】（动画参考杀戮,https://www.bilibili.com/video/BV14t411M7cq?p=15 00:32 可以放慢照抄效果），初始手牌（包含3张召唤英雄的手牌1费，1张神器牌0费）从抽牌堆抽出到手牌中（动画参考火车或杀戮），画面中间显示【游戏开始】，淡出，，费用充满（3费，费用满值时有额外动画，比如火焰燃烧之类，这个杀戮和火车都有，满值时变颜色）。满足使用条件的手牌外框绿色高亮显示。
3. 此时玩家可以自由触摸查看场景内敌方单位和UI上的内容。触摸需要显示的控件或实例有（先弹出个框，框里的内容待定）：顶部栏计时器，神器栏里的神器，双方战场的实例，加速按键，设置按键，开始/暂停按键，抽牌堆，手牌
4. 鼠标或手指移动手牌时，被选中的卡牌略微抬高并放大到原来的130%并正面显示（三个借鉴的卡牌游戏都有类似动画表现）。打出相应的卡牌后，不符合打出条件的手牌红色高亮显示（不符合条件的卡牌拖出手牌区时会提示**费用不足**）。
5. 召唤英雄的奖励卡打出时，出现2选1英雄供玩家选择，选定后英雄卡在手牌中产生（动画参考 https://www.bilibili.com/video/BV1454y1n7sk?t=273 01:47），选择神器的奖励卡打出时，出现3选1神器供玩家选择，选定后神器卡在手牌中产生（动画参考 https://www.bilibili.com/video/BV1454y1n7sk?t=273 01:47）
6. 神器卡打出后，从打出的位置飞一条弹道到神器栏，然后神器栏里淡入打出的神器图标，并闪烁几下，这个闪烁和神器生效时的闪烁特效一致。（https://www.bilibili.com/video/BV14t411M7cq?p=15  10:13）
7. 当玩家拖动英雄卡离开手牌区的范围时，显示指针，友方战场上的所有空余卡槽亮起白光（动画参考：https://www.bilibili.com/video/BV1vV411r7sb?from=search&seid=12980391035936992906 00:38），指针指向这些白光区域的时候，白光区域变为绿光，整条指针也变绿，指针没有指到目标区域的时候，整条指针保持原来的颜色。松开手后，英雄从指定的卡槽上淡入（动画参考：https://www.bilibili.com/video/BV1vV411r7sb?from=search&seid=12980391035936992906 00:38）。
8. 英雄附带的衍生单位卡置入手牌（我忘了是杀戮还是哪个游戏，使用卡牌获得其他卡牌的时候会在英雄脸上淡入两张牌，停留展示一会儿，然后再像第5点炉石那个动画一样飞入手牌，本来想按杀戮小刀贼那个获得小刀一样的特效，但是不适用全部情况，我描述的这个动画所有从单位处获得的卡牌都可以通用）
9. 在我方战场上至少有一个单位之前，开战按键都是不可点击或灰色显示。放入单位后开战按键才会亮起处于可点击状态。
10. 点击开战后，画面中间显示【第01关，战备阶段结束】然后显示【第01关，战斗阶段开始】（动画参考杀戮,https://www.bilibili.com/video/BV14t411M7cq?p=15 00:32 可以调整视频的倍速照抄动画效果）。顶部条内的计时器开始战斗计时，左上角的关卡信息从【第01关 战备阶段】转变为【第01关 战斗阶段】。
11. 各种强化特效、被动技能、遗物开始结算【先声】的效果，开始跳文字，跳特效。（这个可以参考杀戮，各类特效按先被动、再强化、再遗物的顺序开展动画效果，同种的情况按获取顺序）
12. 战斗效果另算。
13. 处决动画，即将杀死最后一个单位时，镜头拉近，并慢放最后一击的弹道过程直到杀死最后一个对手，这个效果对我方最后一个单位死亡也生效。（参考：https://www.bilibili.com/video/BV1vV411r7sb?from=search&seid=12980391035936992906  01:32）
14. 如果战斗胜利且有下一关，画面中间显示【第01关，战斗阶段结束】，执行各种【离场】效果，然后弹一个遮罩弹框，先放着，后面再设计要干嘛，需要有一个确认按键，点击确认后遮罩消失（杀戮的跳过奖励到地图的这个过程，黑屏0.几秒）【1】不需要换场景，直接执行第1点 【2】需要换场景，在黑屏的时候切换地图，双方都需要重新执行入场动画。
15. 如果战斗胜利且没有下一关，黑屏0.几秒跳转到胜利页面，胜利页面有胜利画面、结算分数啥的后面设计，需要有一个按键可供返回首页（后面要弄首页的，如果现在没有就先重开游戏）。
16. 如果战斗失败且没有下一关，黑屏0.几秒跳转到失败页面，失败页面有失败画面、结算分数啥的后面设计，需要有一个按键可供返回首页（后面要弄首页的，如果现在没有就先重开游戏）。



### 3.0.4 战斗相关特效<div id='304'>

（1）普通攻击，攻击者向敌人方向前进一点，敌人身上出现受击动画（打个×或是简单的图标，后期最好能找到有受击动作的模型），扣血或扣甲特效晚于受击动画，然后攻击者回到原地，完成一个完整的普通攻击的流程。（跟火车有点像，不过火车是攻击者直接移动到目标脸上进行动作，我们统一往前移动一小步，打完就回来）

- 受击动画，/BattleUnitCard/Special_effects/position_03/Hit_SE_Image

（2）【进攻】效果的触发是在敌人受击时同步触发，也就是完整攻击流程的中段，以此警戒策划设计【进攻】的相关技能时不要穿插有高延时动画的效果（比如杀戮的获得力量，动画巨长），尽量就是BUFF词缀的层数变化。



（3）提升BUFF层数、技能时机的跳文字特效是往上飘的，显示【BUFF名 层数】；降低BUFF层数的跳文字特效是往下的。显示【BUFF名 -层数】

- 查看/BattleUnitCard/Buff_Text/positive_buff_text，此处是BUFF层数增加时的特效文字区域，层数增加时，文字从Text控件中间出现(原本是隐藏的)，然后向上匀速移动到Text控件边框的上顶点后淡出。Text控件的大小和原画等高等宽。
- 查看/BattleUnitCard/Buff_Textdebuff_text，此处是BUFF层数减少时的特效文字区域，层数减少时，文字从Text控件上顶点出现(原本是隐藏的)，然后向下匀速移动到Text控件边框的下顶点后淡出。Text控件的大小和原画等宽，高度为原画的一半



（4）获得BUFF时不需要特效，但是BUFF在身上的时候，每一个都要有常驻特效展示（可以理解成w3的光环），生效时又需要有另外的特效（比如火车的再生，拥有再生和再生生效是两个特效）。我们需要选择单位模型周围的一些固定地方用来展示持续的BUFF特效，如果两个常驻BUFF特效的展示位置是一样的，那就是粒子效果叠加显示（我仔细看了火车的常驻BUFF，人物的前上下中都是BUFF显示的位置，比如荆棘和法术护盾同时拥有的时候就是叠加显示。）

​                                                      ![image-20210709154444238](https://i.loli.net/2021/07/09/akI75NetQWHJv2G.png)

如果这个BUFF显示方案程序那边觉得没问题的话，初期可以这样做，上下位置的持续特效就用跟立绘等宽的小方形，透明度调低点，然后每个BUFF颜色不一样，方便叠加查看，左右就是等长的小方形，甚至可以复用三条的那个父类预制体。中间位置就显示小正方形，颜色和透明度跟其他位置一样。生效时的特效动画可以搞个亮一点颜色的小方形，生效的时候缓慢闪一下，算一个动画过程。

- 持续性特效显示：/BattleUnitCard/Special_effects/.../Buff_continued_Image
- 短时生效型特效显示：/BattleUnitCard/Special_effects/.../Buff_flash_Image
- 注意1，TOP位置的演示图需要程序根据原画的尺寸顶上去，高度在原画和三条的中间（我在预制体里面调整了相应的高度，程序做的时候把Unit_Attributes和Special_effects/Top都调回00，然后用程序把他们顶上去）
- 注意2，before和behind的位置要跟随原画的朝向而改变
- 注意3，实验室的实验词条已更新了所有BUFF词条的详情



（5）BUFF层数归零时，持续特效消失；BUFF在对应的技能时机生效时，先执行【生效时特效动画】，动画播放完毕后再执行BUFF图标上的层数减少和跳文字；新获得BUFF时，也是优先展示【持续特效动画】，然后再跳文字和BUFF小图标增加。（一帧一帧放慢看火车的效果，它动画时间都很短，几乎是同时，但还是动画稍微优先一点点）



（6）技能或各种特效中的某个时机生效时，需要跳时机的文字，比如【激怒】触发时，跳文字“激怒”。

- 查看/BattleUnitCard/Buff_Text/positive_buff_text，时机生效时的跳文字特效，复用BUFF层数增加时的特效，文字内容和颜色读取trigger_name(已在实验室7.4中写明)，从Text控件中间出现(原本是隐藏的)，然后向上匀速移动到Text控件边框的上顶点后淡出。Text控件的大小和原画等高等宽。



（7）扣血播放受击动画；回血、回蓝的动画和BUFF生效动画一样，先用颜色小方块闪一下代替，位置就放在中间，以后像这类东西策划做的时候，注意要放到一个时机里面执行，在一套动画规则下运行。

- 受击动画，/BattleUnitCard/Special_effects/position_03/Hit_SE_Image，由于受击动画的频率比较高，单独拿出来做一个，其他的动画就复用短时生效型特效的位置

（8）带伤害的主动释放时就可以显示弹道了，释放频率比较低，放放动画不算过分。主动技能也先跟普通攻击一样，往前走一点算技能前摇，然后弹道与目标碰撞后即动画播放完后执行伤害，结束后往回走。主动技能描述中，如果是多个效果在一个句号内描述，那就是属于同时发生，如果分属两个句号，那就是分段执行。比如【造成10点伤害，回复5点生命。】这个就是发射弹道和回复生命的动画同时执行，如果是【造成10点伤害。回复5点生命。】那就是先执行攻击，弹道命中目标扣完血，然后播放生命回复的动画，都结束后往回走。



（9）护盾的显示就在三条旁边放个小方块，跟显示BUFF一样，直接显示护盾数值



### 3.0.5 游戏其他的动画效果<div id='305'>

1. 打出任意手牌时，会在画面正中央短暂停留0.2秒，等该卡牌的动画生效结束后缩小飞向各自的目标。（其他卡牌游戏都是飞向弃牌堆，但是我们界面上用不到弃牌堆【实际上程序内部应该有一个】，那就是各种卡飞向各自的目标，具体看表格）（动画参考：https://www.bilibili.com/video/BV14t411M7cq?p=15 01：04）

| 卡牌类型 |          卡牌生效后的弹道终点          |
| :------: | :------------------------------------: |
|  单位卡  |                  卡槽                  |
|  神器卡  |        遗物栏，然后遗物图标淡入        |
|  强化卡  |           效果的作用目标立绘           |
|  奖励卡  | 无弹道重点，打出生效后就是展示选择卡牌 |

1. 跳过奖励时，在触摸跳过按键时，会将没选择的奖励高亮展示
2. 全屏弹框的功能按键放在左右两边



#### 3.0.6 所有卡牌的卡牌说明<div id="306">

[![R5Nqmt.png](https://z3.ax1x.com/2021/07/05/R5Nqmt.png)](https://imgtu.com/i/R5Nqmt)

- 卡牌描述中，带有粗体的概括性描述，需要读取相应的解释说明，并在卡牌的两侧（默认右侧，有遮挡物时左侧显示）

- 卡牌描述中，以下几类游戏术语在卡面表现上将由特别的颜色代替原有通用的黑色字体描述，意味着技能描述的位置需要和之前一样可以由策划自由设定关键字的粗细和颜色。一个个改也行，统一改也行

|                           游戏术语                           | 专属颜色 |
| :----------------------------------------------------------: | :------: |
|                     物理攻击力、物理攻击                     | #FF6600  |
|                      法术强度、法术攻击                      | #3366FF  |
|                      生命值、最大生命值                      | #33CC66  |
|                      法力值、最大法力值                      | #0099FF  |
|                       暴击率、暴击效果                       | #FF9900  |
| 物伤减免、法伤减免、闪避率、生命偷取、攻击回魔、承伤回魔、攻击速度 | #9966FF  |

![image-20210705201432424](https://i.loli.net/2021/07/05/6CiuEzbDJ2yABNV.png)



#### 3.0.7 单位实体或单位卡说明<div id="307">

##### （1）单位卡在战场实例化

![image-20210705205211168](https://i.loli.net/2021/07/05/wDoEFaICQrMyjXq.png)

- 友方战场一侧的单位，点击实体本身时，在画面的右边显示基础属性，主动技能，被动技能，目前的所有显性BUFF，如果是英雄的话还需要显示身上的每一个强化效果
- 敌方战场一侧的单位，点击实体本身时，在画面的左边显示基础属性，主动技能，被动技能，目前的所有显性BUFF

##### （2）单位卡在手牌中

![image-20210705205639603](https://i.loli.net/2021/07/05/knUaRez6vb2uYLw.png)

- 先从和卡牌底部齐平的右边显示基础属性，然后再在基础属性上显示该卡所包含的特殊词条说明



#### 3.0.8 跳文字：技能生效、BUFF生效、强化效果生效、遗物效果生效<div id="308">

![image-20210705190321250](https://i.loli.net/2021/07/05/EKCWrOy8tan7T4s.png)



|     生效类型     |    文字内容     |           文字位置           |                           文字颜色                           |
| :--------------: | :-------------: | :--------------------------: | :----------------------------------------------------------: |
|   主动技能发动   |     技能名      | 单位预制体的（0,0）升起淡出  |                         大字白色黑边                         |
|   被动技能生效   |     技能名      | 单位预制体的（0,0）升起淡出  |                         大字白色黑边                         |
| 可见BUFF层数改变 | BUFF名 目前层数 | 单位预制体的（0,0）升起淡出  | 系统智能识别，BUFF名不带下降的显示大字白色黑边；<br />BUFF名带下降的显示大字粉色黑边 |
|   遗物效果生效   |     遗物名      | 单位预制体的（0,0）升起淡出  |                         大字白色黑边                         |
|   强化效果生效   |   强化效果名    | 单位预制体的（0,0）升起淡出  |                         大字白色黑边                         |
|    生命值变化    | ±变化数值 生命  | 从单位图像中线向两侧随机弹开 |            扣血时小字红色黑边；加血时小字绿色黑边            |
|     暴击受击     |  暴击伤害数值   | 从单位图像中线向两侧随机弹开 |                        红色加额外边框                        |
|    护盾值变化    | ±变化数值 护盾  | 从单位图像中线向两侧随机弹开 |                           白色黑边                           |
|    法力值变化    | ±变化数值 法力  | 从单位图像中线向两侧随机弹开 |                           蓝字黑边                           |

- 遗物在生效时，处于top栏中的遗物图标闪烁1次
- 大字指在预制体中使用3Dobject中的Text组件的10号字
- 小字指在预制体中使用3Dobject中的Text组件的7号字
- 大号字体的字体组件和单位立绘图像等宽等高，锚点位于bottom的中点，字体四周居中。效果生效时，提示文字从纵向的50%匀速上升到100%然后淡出消失，速度先随意。



#### 3.0.9 卡牌特效<div id="309">

##### （1）选中特效

- 手牌区的卡牌被触摸选中或者指针移动到卡面时，边框发白光，并放大卡面1.3倍，如果有堆叠卡牌的情况，该选中卡牌将处于上层。

##### （2）使用特效

- 有指针的卡牌在从手牌区离开时，会显示指针，指针在非目标上移动时（无实例的空白区域或错误目标），整个指针包含针头和链条都显示为白色；当指针指向设定的目标时，显示为绿色，且可选的目标将会发生对应的特效。

- 结合2.0.4 进行使用

| 卡牌类型 |            动作            |                             特效                             |
| :------: | :------------------------: | :----------------------------------------------------------: |
|  单位卡  |       使用并移动指针       | 我方战场上的空置站位会发出白光；我方战场上的单位立绘外侧散发白光，表示为可选 |
|          | 指针指向具体的空位或者单位 |    空位发出的白光转变为绿光，单位立绘外侧的白光转变为绿光    |
|  强化卡  |       使用并移动指针       |         我方战场上的英雄立绘外侧散发白光，表示为可选         |
|          |     指针指向具体的英雄     |                 英雄立绘外侧的白光转变为绿光                 |

