# 7 实验室

本测试实验室的宗旨是在调整整个船的航向时，先派出试探性的小舢板查探暗礁。

### 7.0 目录

- [<div>7.1 词条</div>](#71)
- [<div>7.2 职业</div>](#72)
- [<div>7.3 转生模板</div>](#73)
- [<div>7.4 奖励类型 - 联动AwardUI/Award</div>](#74)
- [<div>7.5 时机表</div>](#75)
- [<div>7.5.1 通用属性</div>](#751)
- [<div>7.5.2 时机</div>](#752)
- [<div>7.5.4 时机 - 非词缀</div>](#754)
- [<div>7.7 特效表</div>](#77)
- [<div>7.7.1 特效位置图</div>](#771)
- [<div>7.7.2 文字特效 </div>](#772)
- [<div>7.7.3 贴图特效</div>](#773)
- [<div>7.7.5 技能特效</div>](#776)
- [<div>7.7.6 BUFF特效</div>](#777)
- [<div>7.8 怪物军团</div>](#78)
- [<div>7.9 特殊进化</div>](#79)
- [<div>7.10 一些杂项</div>](#710)
- [<div>7.11 额外新功能</div>](#711)
- [<div>7.11.3 新版战斗</div>](#7113)

### 7.1 词条<div id='71'>

#### 7.1.1 BUFF

|      BUFF名       |                            说明                             | 衰减类型 |
| :---------------: | :---------------------------------------------------------: | :------: |
|   buff_001 回春   |      在行动开始时，回复5点生命值。行动结束后层数减少1       |   time   |
|   buff_002 嗜血   |          +20%生命偷取。进行1次普通攻击后层数减少1           |  attack  |
|   buff_003 脱力   |        每层-1物理攻击力。进行1次普通攻击后层数减少1         |  attack  |
|   buff_004 抵抗   |      每层+1%物伤减免和+1%法伤减免。战斗结束后层数清零       |  finish  |
|   buff_005 力量   |            每层+1物理攻击力。战斗结束后层数清零             |  finish  |
|   buff_006 狂暴   |          +50%攻击速度。进行1次普通攻击后层数减少1           |  attack  |
|   buff_008 奥能   |             每层+1法术强度。战斗结束后层数清零              |  finish  |
|   buff_009 剧毒   | 在行动开始时，受到相当于当前层数的真实伤害。行动结束后减少1 |   time   |
|   buff_010 耐久   |    每层+1%最大生命值并获得相应生命值。战斗结束后层数清零    |  finish  |
| buff_011 治疗次数 |                 记录1场战斗内触发治疗的次数                 |  state   |
| buff_012 施法次数 |                 记录1场战斗内触发施法的次数                 |  state   |
|   buff_013 疾速   |             每层+1%攻击速度。战斗结束后层数清零             |  finish  |
|  buff_014 连击点  |                累积连击点来增强你的技能威力                 |  state   |

#### 7.1.2 时机

|     时机名      |         说明          |
| :-------------: | :-------------------: |
| trigger_01 受击 |      受到攻击时       |
| trigger_02 进攻 |    进行普通攻击时     |
| trigger_03 濒死 | 生命值低于或等于30%时 |
| trigger_04 施法 |    使用主动技能后     |
| trigger_06 破盾 |  当受击后护盾减少时   |
| trigger_07 先声 |     当战斗开始时      |
| trigger_08 治疗 |   对单位进行治疗时    |
|                 |                       |
|   trigger_09    |     在行动开始时      |

### 7.2 职业<div id='72'>

注：

（1）其中战士和牧师为固定出现，其他职业每场随机出现1种

（2）基准属性数值

|    属性    |  值  |
| :--------: | :--: |
| 最大生命值 | 200  |
| 物理攻击力 |  10  |
|  法术强度  |  20  |
|   法力值   |  75  |
|  物伤减免  |  5%  |
|  法伤减免  |  5%  |
|   暴击率   | 20%  |
|  暴击效果  | 150% |
|  攻击速度  | 5秒  |
|   闪避率   |  5%  |
|  生命偷取  |  0%  |
|  攻击回魔  |  5   |
|  承伤回魔  |  5%  |



#### 7.2.1 Profession_01 战士 

#### 7.2.1.1 职业属性修正

|    属性    |  数值   |
| :--------: | :-----: |
|   生命值   |  + 100  |
| 物理攻击力 |  + 10   |
|  物伤减免  |  + 5%   |
|  法术强度  |  - 15   |
|   法力值   |   + 5   |
|  攻击速度  | + 0.5秒 |

#### 7.2.1.2 主动技能

|       技能名       |                           技能效果                           |
| :----------------: | :----------------------------------------------------------: |
| skill_024 浴血狂化 |       获得**狂暴 (6)**，**失血：**额外获得**狂暴 (1)**       |
| skill_031 劈山裂海 | 对1个敌方单位造成200%物理攻击力的魔法伤害，目标**失血：**获得**力量(2)** |
| skill_032 挺盾冲撞 | 对1个敌方单位造成（50%物理攻击力+150%护盾值）的魔法伤害并清零护盾值；获得5%当前生命值的护盾 |



#### 7.2.1.3 被动技能（每个主动技能6个不升级衍生被动+10个升级的通用被动*2）

|        技能名        | 关联技能 |                           技能效果                           |
| :------------------: | :------: | :----------------------------------------------------------: |
| Ability_322 死战不殆 | 浴血狂化 |                  **濒死：**获得**抵抗(30)**                  |
| Ability_323 渴血盛宴 | 浴血狂化 |           每获得**狂暴 (3)**，额外获得**嗜血 (1)**           |
| Ability_324 身经百战 | 浴血狂化 |               **施法, 失血：**获得**抵抗(1)**                |
| Ability_325 攻无不克 | 浴血狂化 |       **进攻：**失去1%当前剩余生命值，获得**力量(2)**        |
| Ability_328 怒发冲冠 | 劈山裂海 |                  **受击：**获得**力量(1)**                   |
| Ability_329 窃能巧手 | 劈山裂海 | **进攻：**有(10+X)%的概率对目标施加**脱力(1)**并使自己获得**力量(1)**，X为自身**力量**的层数 |
| Ability_330 汲取灵魂 | 劈山裂海 | 当1名友方英雄死亡时，获得**力量(10)**；当1名敌方单位死亡时，获得**力量(5)** |
| Ability_331 绝地反击 | 劈山裂海 |                **濒死：**自身**力量**层数翻倍                |
| Ability_334 腹藏万甲 | 挺盾冲撞 |               **施法：**获得5%最大生命值的护盾               |
| Ability_335 防御姿态 | 挺盾冲撞 |                 **施法, 失血：**获得5点护盾                  |
| Ability_336 后土恩泽 | 挺盾冲撞 |                   **破盾：**回复1点生命值                    |
| Ability_337 荆刺外甲 | 挺盾冲撞 | **受击：**以物理伤害的形式将5%战士最大生命值返还给敌方的攻击发起者 |
| Ability_340 负伤铸甲 |   通用   |                    **受击：**获得5点护盾                     |
| Ability_341 百折不挠 |   通用   |           **施法：**每有5点最大法力值回复1点生命值           |
| Ability_342 一线生机 |   通用   |                 **濒死：**获得**嗜血 (10)**                  |
| Ability_343 荡除心魔 |   通用   | **施法：**移除自身所有的负面BUFF，每移除1种负面BUFF获得**力量(1)** |



#### 7.2.2 Profession_02 牧师

##### 7.2.3.1 职业属性修正

|    属性    | 数值 |
| :--------: | :--: |
|  法术强度  | +15  |
| 最大生命值 | +50  |
|   法力值   | +20  |
|  攻击速度  | +1秒 |
| 物理攻击力 | -10  |

##### 7.2.3.2 主动技能

|        技能名        |                           技能效果                           |
| :------------------: | :----------------------------------------------------------: |
| Ability_033 沐浴圣光 |          回复所有友方单位X点生命值，X为牧师50%法强           |
| Ability_034 醍醐灌顶 | 回复生命比例最低的友方单位X点生命值，X为该单位15%最大生命值 + 牧师50%法强 |
| Ability_035 同心合德 | 回复1个其他友方单位X点生命值和X点法力值，并回复牧师X点生命值，X为牧师40%法强 |

##### 7.2.3.3 被动技能

|        技能名        | 关联技能 |                           技能效果                           |
| :------------------: | :------: | :----------------------------------------------------------: |
| Ability_401 清除杂念 |   通用   |          **治疗：**使该单位身上所有负面BUFF层数清零          |
| Ability_402 拾柴添薪 |   通用   |           **治疗：**使该单位身上1种正面BUFF层数+5            |
| Ability_403 坚如磐石 |   通用   |         **治疗：**使该单位获得**抵抗(5)**和10点护盾          |
| Ability_404 神圣惩戒 |          |      **治疗：**对1个敌方单位造成100%总治疗量的魔法伤害       |
| Ability_405 安定心神 |   通用   | **治疗：**如果该单位生命值仍然低于30%，使其获得**回春(10)**  |
| Ability_406 净罪重生 |   通用   | 当有其他友方英雄死亡时，牧师失去30%最大生命值的生命，<br />复活死亡英雄并回复他20%最大生命值。当牧师生命值低于30%时无法生效 |
| Ability_407 超量治疗 |   通用   |           **治疗：**溢出的治疗量会转化为等量护盾值           |
| Ability_408 奥秘之手 |   通用   |                  **进攻：**获得**奥能(2)**                   |
| Ability_409 生命归还 |          |    **受击：**回复1名其他友方单位等同于原始伤害量的生命值     |
| Ability_410 神官笔记 |   通用   | **先声：**获得**奥能(X)**并清零**治疗次数**，X为**治疗次数**×2；<br />**治疗：**获得**治疗次数(1)** |
| Ability_411 神赐恩典 |   通用   |        **濒死：**回复20%最大生命值并获得**回春(10)**         |
| Ability_412 紧急处理 |          | **进攻：**回复1名其他友方单位X点生命值，X为目标单位1%最大生命值 |



#### 7.2.3 Profession_03 法师

##### 7.2.3.1 职业属性修正

|    属性    | 数值 |
| :--------: | :--: |
|  法术强度  | +30  |
|   法力值   | +25  |
| 物理攻击力 | -10  |
| 最大生命值 | -100 |
|  攻击补魔  |  +5  |

##### 7.2.3.2 主动技能

|        技能名        |                           技能效果                           |
| :------------------: | :----------------------------------------------------------: |
| Ability_036 毒雾弥漫 | 对1名敌方单位造成70%法强的魔法伤害；对所有敌方单位施加**剧毒 (X)**，X为10%法强 |
| Ability_037 奥术散射 |             对所有敌方单位造成50%法强的魔法伤害              |
| Ability_038 魔能飞弹 | 对1名敌方单位造成50%法强的魔法伤害，执行2次*(可2次触发**施法**)* |

##### 7.2.3.3 被动技能

|        技能名        | 关联技能 |                           技能效果                           |
| :------------------: | :------: | :----------------------------------------------------------: |
| Ability_501 毕功一役 |          | **进攻：**将其他敌方单位身上20%的**剧毒**层数转移到目标身上  |
| Ability_502 医毒同源 | 毒雾弥漫 | **施法：**检定所有敌方单位身上**剧毒**的总层数，每有**剧毒(1)**，回复法师1点生命值 |
| Ability_503 精炼毒物 |          |      **施法：**使所有敌方单位身上的**剧毒**层数增加50%       |
| Ability_504 置换反应 | 奥术散射 |         **受击：**获得**奥能(X)**，X为30%原始伤害量          |
| Ability_505 窃法增幅 |          | **进攻：**使目标失去20%当前法力值；获得**奥能(X)**，<br />X为目标失去的法力值 |
| Ability_506 凝聚法能 | 奥术散射 | **施法：**获得**奥能(X)**，X为10%所有友方英雄身上**奥能**的层数 |
| Ability_507 气定神闲 | 魔能飞弹 |           **施法：**每有**奥能(1)**，回复1点生命值           |
| Ability_508 魔能屏障 | 魔能飞弹 |            **施法：**获得X点护盾，X为30%法术强度             |
| Ability_509 共享魔源 | 魔能飞弹 | **施法：**使其他友方英雄回复X点法力值，X为法师15%最大法力值  |
| Ability_510 元素滋养 |   通用   |       **先声：**获得**耐力(X)** ，X为法师20%最大法力值       |
| Ability_511 能量回收 |   通用   |            最大法力值+20；**施法：**回复30%法力值            |
| Ability_512 预备充能 |   通用   | **先声：**获得**奥能(X)** ，X为**施法次数**的层数；**施法：**获得**施法次数(1)** |
| Ability_513 能量窃夺 |   通用   |    **进攻：**窃取目标单位X点法力值，X为目标10%最大法力值     |
| Ability_514 盛大登场 |   通用   |             +5攻击回魔；**先声：**获得100%法力值             |



#### 7.2.4 剑客

##### 7.2.4.1 职业属性修正

|    属性    | 数值  |
| :--------: | :---: |
| 物理攻击力 | + 20  |
|   暴击率   | + 20% |
|   闪避率   | +10%  |
|  暴击伤害  | -50%  |
| 最大生命值 | -100  |

##### 7.2.4.2 主动技能

|        技能名        |                           技能效果                           |
| :------------------: | :----------------------------------------------------------: |
| Ability_039 冯虚御气 | 对1个敌方单位造成（120% + X）物攻的魔法伤害，X为10%`*`**连击点**层数；清零**连击点**层数 |
| Ability_040 死亡如风 | 对所有敌方单位造成X点魔法伤害，X为3%物攻`*`**连击点**层数；清零**连击点**层数 |
| Ability_041 疾罡剑法 | 获得**力量(X)**，获得**疾速(X)**，X为50%**连击点**层数；减少75%**连击点**层数 |

##### 7.2.4.3 被动技能

|        技能名        | 关联技能 |                           技能效果                           |
| :------------------: | :------: | :----------------------------------------------------------: |
| Ability_515 攻势如龙 | 疾罡剑术 |         **进攻：**每有**连击点(5)**，获得**疾速(1)**         |
| Ability_516 倍化之术 | 疾罡剑术 | **施法：**30%的概率获得**连击点(3)**并使**连击点**层数翻倍。每已失去10%的生命值，都会使这个概率提升10% |
| Ability_517 人剑合一 | 疾罡剑术 | +30最大法力值；**施法：**获得**耐力(X)**，X为**连击点**层数  |
| Ability_518 剑罡萦体 | 疾罡剑术 |        **施法：**获得X点护盾，X为100%物理攻击力的数值        |
| Ability_519 万法通流 |   通用   |        **施法：**获得**连击点(X)**，X为10%最大法力值         |
| Ability_520 拭刃吮血 |   通用   | **进攻：**回复X点生命值，X为**连击点**层数；50%的概率减少**连击点(1)** |
| Ability_521 毒刃切割 |   通用   |      **进攻：**每有**连击点(2)**，对目标施加**剧毒(1)**      |
| Ability_522 敛息吐纳 |   通用   | 每减少**连击点(1)**，回复1点生命值和1点法力值，并减少1层身上所有的DEBUFF |
| Ability_523 生死有命 |   通用   |              **先声，濒死：**获得**连击点(20)**              |
| Ability_524 因果循环 |   通用   | **受击：**当**连击点**层数非0时，获得X点护盾，否则，获得**连击点(10)**，X为**连击点**层数 |
| Ability_525 剑气凛然 |   通用   | **进攻：**（30%+2%`*`X）的概率获得X点法力值，X为**连击点**层数 |
| Ability_526 旱涝保收 |   通用   |          **连击点**层数不会低于10层，也不会高于30层          |
| Ability_527 一元复始 |   通用   |        每次**连击点**的层数变化时，获得**连击点(3)**         |
| Ability_528 攻伐有术 |   通用   |             **进攻：**50%的概率获得**连击点(1)**             |
| Ability_529 宿运在天 |   通用   | **施法：**获得**连击点(X)**，X的范围为1~10。每已失去10%的生命值，都会使这个范围的下限和上限各+1 |
| Ability_530 聚血引剑 |   通用   |       **施法：**每已失去10%的生命值，获得**连击点(2)**       |



### 7.3 转生模板<div id='73'>

注：

（1）所有属性：物理攻击力 / 法术强度 / 法力值 / 物伤减免&法伤减免 / 暴击率 / 暴击效果 / 攻击速度 / 闪避率 / 生命偷取 / 攻击回魔

（2）同类属性-百分比： 物伤减免&法伤减免 / 暴击率 / 暴击效果 / 攻击速度 / 闪避率 / 生命偷取

（3）同类属性-数值：物理攻击力 / 法术强度 / 法力值 / 攻击回魔

#### 7.3.1 模板1：专精

|     项目     |                      说明                      |   数值    |
| :----------: | :--------------------------------------------: | :-------: |
|     模板     |                      专精                      |     -     |
|   属性削弱   |         除了增强属性外其他任意3种属性          |  4% ~ 6%  |
|   属性增强   |            从所有属性中选择1个属性             | 15% ~ 20% |
| 被动技能遗忘 |            从已获得的被动技能中选择            |     1     |
| 被动技能获得 | 从该职业的被动技能库中选择，需排除已获得的技能 |     1     |

#### 7.3.2 模板2：转移

|     项目     |                      说明                      |          数值          |
| :----------: | :--------------------------------------------: | :--------------------: |
|     模板     |                      转移                      |           -            |
|   属性削弱   |          从所有属性中另外选择2个属性           | 根据属性增加的数值削减 |
|   属性增强   |            从所有属性中选择2个属性             |        5% ~ 10%        |
| 被动技能遗忘 |            从已获得的被动技能中选择            |          1个           |
| 被动技能获得 | 从该职业的被动技能库中选择，需排除已获得的技能 |          1个           |

注：同类属性增加数值只会削减同类属性中其他属性的数值



### 7.4 奖励类型 - 联动AwardUI/Award <div id='74'>

##### 7.4.1 转生

|    字段名    |         字段         |    说明    |
| :----------: | :------------------: | :--------: |
|   奖励编号   |       award_id       |  Award_01  |
|    奖励名    |      award_name      |    转生    |
| 奖励关联图标 |     award_image      | icon_skull |
| 预选奖励个数 |   award_pre_count    |     3      |
| 可选奖励个数 | award_optional_count |     1      |

|    项目    |                             说明                             |
| :--------: | :----------------------------------------------------------: |
| 关联预制体 |              Assets/Prefabs/UI/Associate.prefab              |
|  相关配置  |                  [<div>转生模板</div>](#73)                  |
|  效果说明  | 3个职业各有1个转生效果，每个转生效果从转生模板中随机，玩家可从3个效果中选择1个 |

##### 7.4.2 技能

|    字段名    |    说明     |
| :----------: | :---------: |
|   奖励编号   |  Award_02   |
|    奖励名    |    技能     |
| 奖励关联图标 | icon_energy |
| 预选奖励个数 |      3      |
| 可选奖励个数 |      1      |

|    项目    |                             说明                             |
| :--------: | :----------------------------------------------------------: |
| 关联预制体 |                     Choose_Skill.prefab                      |
|  效果说明  | 3个职业各有1个被动技能，玩家可从3个被动技能中选择1个，未被选中的技能放回 |

##### 7.4.3 神器

|    字段名    |    说明    |
| :----------: | :--------: |
|   奖励编号   |  Award_03  |
|    奖励名    |    神器    |
| 奖励关联图标 | icon_crown |
| 预选奖励个数 |     2      |
| 可选奖励个数 |     1      |

|    项目    |                          说明                          |
| :--------: | :----------------------------------------------------: |
| 关联预制体 |                 Choose_Artifact.prefab                 |
|  效果说明  | 从所有神器中不放回的随机抽取2个神器，玩家可从中选择1个 |



### 7.5 时机表<div id="75">

#### 7.5.1 通用属性<div id="751">

|  字段名  |      字段       |                     值说明                     |    值示例    |
| :------: | :-------------: | :--------------------------------------------: | :----------: |
| 时机编号 |   trigger_id    |                 触发时机的编号                 |  trigger_01  |
| 时机名称 |  trigger_name   |                  触发时机名称                  |     受击     |
| 时机说明 | trigger_details |     触发时机说明，在卡牌说明中需要展示详情     |  受到伤害时  |
| 贴图特效 |   se_image_id   | 绑定在时机上的贴图特效，展示在触发时机的本体上 | se_image_001 |
| 文字特效 |   se_text_id    | 绑定在时机上的文字特效，展示在触发时机的本体上 | se_text_001  |



#### 7.5.2 时机<div id="752">

|  时机编号  | 时机名 |       时机说明        |
| :--------: | :----: | :-------------------: |
| trigger_01 |  受击  |      受到伤害时       |
| trigger_02 |  进攻  |    进行普通攻击时     |
| trigger_03 |  濒死  | 生命值低于或等于30%时 |
| trigger_04 |  施法  |    使用主动技能后     |
| trigger_05 |  破盾  |  当受击后护盾减少时   |
| trigger_06 |  治疗  |   对单位进行治疗时    |
| trigger_51 |  先声  |     当战斗开始时      |



#### 7.5.4 时机 - 非词缀<div id="754">

|  时机编号  |      时机名      |                     时机说明                     |
| :--------: | :--------------: | :----------------------------------------------: |
| trigger_71 |  BUFF减少层数时  |             当任意1种BUFF减少层数时              |
| trigger_72 |  BUFF增加层数时  |             当任意1种BUFF增加层数时              |
| trigger_73 |  被动技能触发时  |            当单位的任意被动技能触发时            |
| trigger_74 |                  |                                                  |
| trigger_75 | 显示生命值减少时 | 显示生命值减少时，不论因为什么减少，只看血量变化 |
| trigger_76 | 显示生命值增加时 | 显示生命值增加时，不论因为什么增加，只看血量变化 |
| trigger_77 | 显示法力值减少时 | 显示法力值减少时，不论因为什么减少，只看蓝量变化 |
| trigger_78 | 显示法力值增加时 | 显示法力值增加时，不论因为什么增加，只看蓝量变化 |
| trigger_79 |   护盾值减少时   |  护盾值减少时，不论因为什么减少，只看护盾值变化  |
| trigger_80 |   护盾值增加时   |  护盾值增加时，不论因为什么增加，只看护盾值变化  |
| trigger_81 |    发生闪避时    |             人物被攻击触发闪避机制时             |
| triiger_82 |     被暴击时     |             人物被攻击触发暴击伤害时             |



### 7.7 特效表<div id="77">

- 特效由以下几部分并行组成，各部分在运行时互不干扰
  - 文字特效
  - 技能特效
  - BUFF特效
  - 时机特效
  - 人物动作



##### 7.7.1 特效位置<div id="771">

![image-20210915202736199](https://i.loli.net/2021/09/15/J2ECVNLmdpgKAzW.png)

|      项目       |                             说明                             |
| :-------------: | :----------------------------------------------------------: |
|  position_top   | 位于人物的顶部中点，unity内的坐标目前为00，需要根据单位的实际图片计算位置。文字特效的终点。 |
|  position_mid   | 位于人物的图片中点，unity内的坐标目前为00，需要根据单位的实际图片计算位置。文字特效的起点 |
| position_bottom | 位于人物的底部中点，unity内的坐标目前为00，需要根据单位的实际图片计算位置 |



##### 7.7.2 文字特效<div id="772">

##### （1）字段

|   字段名    |     字段     |                            值说明                            |      值示例       |
| :---------: | :----------: | :----------------------------------------------------------: | :---------------: |
| 文字特效id  |  se_text_id  |                         文字特效的id                         |    se_text_001    |
|  文字颜色   |  text_color  |                        文字特效的颜色                        |      #FFFFFF      |
|  文字内容   |  text_input  |      文字特效显示的内容，需要能从所绑定的时机处获得信息      |      残杀 +1      |
|  移动类型   |  move_type   | Assets/Animations/UI/Text中的**Text_Animation_01**和**Text_Animation_02** | Text_Animation_01 |
| 关联trigger | link_trigger |                        关联的trigger                         |         -         |

##### （1）se_text_001（关联trigger_71 BUFF增加层数时）

|   字段名    |                值                 |
| :---------: | :-------------------------------: |
| 文字特效id  |            se_text_001            |
|  文字颜色   |              #33CC66              |
|  文字内容   | {BUFF名} + " " + "+" + {变化层数} |
|  移动类型   |         Text_Animation_01         |
| 关联trigger |     trigger_71 BUFF增加层数时     |

##### （2）se_text_002（关联trigger_72 BUFF减少层数时）

|   字段名    |                  值                   |
| :---------: | :-----------------------------------: |
| 文字特效id  |              se_text_002              |
|  文字颜色   |                #FF0033                |
|  文字内容   | { BUFF名 } + " " + "-" + { 变化层数 } |
|  移动类型   |           Text_Animation_01           |
| 关联trigger |     关联trigger_72 BUFF减少层数时     |

##### （3）se_text_003（关联trigger_73 被动技能触发时）

|   字段名    |            值             |
| :---------: | :-----------------------: |
| 文字特效id  |        se_text_003        |
|  文字颜色   |          #9966CC          |
|  文字内容   |      { 被动技能名 }       |
|  移动类型   |     Text_Animation_01     |
| 关联trigger | trigger_73 被动技能触发时 |

##### （4）se_text_004（关联trigger_74 使用主动技能时）

|   字段名    |            值             |
| :---------: | :-----------------------: |
| 文字特效id  |        se_text_004        |
|  文字颜色   |          #9966CC          |
|  文字内容   |      { 主动技能名 }       |
|  移动类型   |     Text_Animation_01     |
| 关联trigger | trigger_74 使用主动技能时 |

##### （5）se_text_005（关联trigger_75 显示生命值减少时）

|   字段名    |             值              |
| :---------: | :-------------------------: |
| 文字特效id  |         se_text_005         |
|  文字颜色   |           #FF0033           |
|  文字内容   |      “-”  + { 变化值 }      |
|  移动类型   |      Text_Animation_02      |
| 关联trigger | trigger_75 显示生命值减少时 |

##### （6）se_text_006（关联trigger_76 显示生命值增加时）

|   字段名    |             值              |
| :---------: | :-------------------------: |
| 文字特效id  |         se_text_006         |
|  文字颜色   |           #33CC66           |
|  文字内容   |      “+” + { 变化值 }       |
|  移动类型   |     TText_Animation_02      |
| 关联trigger | trigger_76 显示生命值增加时 |

##### （7）se_text_007（关联trigger_77 显示法力值减少时）

|   字段名    |             值              |
| :---------: | :-------------------------: |
| 文字特效id  |         se_text_007         |
|  文字颜色   |           #33CCFF           |
|  文字内容   |      “-”  + { 变化值 }      |
|  移动类型   |      Text_Animation_02      |
| 关联trigger | trigger_77 显示法力值减少时 |

##### （8）se_text_008（关联trigger_78 显示法力增加时）

|   字段名    |            值             |
| :---------: | :-----------------------: |
| 文字特效id  |        se_text_008        |
|  文字颜色   |          #33CCFF          |
|  文字内容   |     “+” + { 变化值 }      |
|  移动类型   |     Text_Animation_02     |
| 关联trigger | trigger_78 显示法力增加时 |

##### （9）se_text_009（关联trigger_79 护盾值减少时）

|   字段名    |           值            |
| :---------: | :---------------------: |
| 文字特效id  |       se_text_009       |
|  文字颜色   |         #FFFFFF         |
|  文字内容   |    “-” + { 变化值 }     |
|  移动类型   |    Text_Animation_02    |
| 关联trigger | trigger_79 护盾值减少时 |

##### （10）se_text_010（关联trigger_80 护盾值增加时）

|   字段名    |           值            |
| :---------: | :---------------------: |
| 文字特效id  |       se_text_010       |
|  文字颜色   |         #FFFFFF         |
|  文字内容   |    “+” + { 变化值 }     |
|  移动类型   |    Text_Animation_02    |
| 关联trigger | trigger_80 护盾值增加时 |

##### （11）se_text_011

|   字段名    |          值           |
| :---------: | :-------------------: |
| 文字特效id  |      se_text_011      |
|  文字颜色   |        #FFFFFF        |
|  文字内容   |         Miss          |
|  移动类型   |   Text_Animation_02   |
| 关联trigger | trigger_81 发生闪避时 |

##### （12）se_text_012

|   字段名    |          值           |
| :---------: | :-------------------: |
| 文字特效id  |      se_text_012      |
|  文字颜色   |        #D95757        |
|  文字内容   |        “暴击!”        |
|  移动类型   |   Text_Animation_02   |
| 关联trigger | trigger_82 触发暴击时 |

##### 7.7.3 贴图特效<div id="773">

|   字段名   |      字段      |                             说明                             |
| :--------: | :------------: | :----------------------------------------------------------: |
| 贴图特效id |  se_image_id   |                              -                               |
|  生效位置  | image_position | 在目标的哪个位置上生效position_top / position_mid / position_bottom |
|   预制体   |  image_prefab  |                        使用哪个预制体                        |
|  持续时间  | continue_time  | -1为永久保持；填写其他大于0的数字，到时间后，特效会从场景中被回收 |

- 先按瞬发做，看实际效果再考虑是否加入前摇
- 通过调节特效预制体的loop_time可做出想要的不同特效类型
- 通过调节特效预制体的pivot，可以保证特效在image_position的落点一致为00

##### （1）测试效果1<div id="773001">

|   字段名   |                值                 |
| :--------: | :-------------------------------: |
| 贴图特效id |           se_image_001            |
|  生效位置  |           position_mid            |
|   预制体   | Assets/FX/Prefabs/FX001_01.prefab |
|  持续时间  |                -1                 |



##### 7.7.4 技能特效<div id="775">

- 在技能表的Link中再加1个Link Se，用来填写N段技能目标的特效id
- 比如技能36毒雾弥漫有2个技能目标，就需要在Link Se中填写两个特效id用于显示在目标身上



##### 7.7.5 BUFF特效<div id="776">

- 在BUFF表中在新增1个项目，BUFF特效buff_se用于填写特效id，buff的特效基本都是持续性的



### 7.8 怪物军团<div id='78'>

##### （1）测试怪物01（越打越不痛，还回血，血条做长，攻击低）

|         字段名         |            说明            |
| :--------------------: | :------------------------: |
|          编号          |          unit_311          |
|          名称          |         测试怪物01         |
|          介绍          |             -              |
|  skill_030 主动：治愈  |      获得**回春(5)**       |
| skill_321 被动：硬体术 | **受击：**获得 **抵抗(2)** |



### 7.9 特殊进化<div id='79'>

- 前言：按15关来计算，每5关算一个阶段，在打完boss之后的奖励阶段，此次的转生将附赠与战斗无关的好特性1个，并获得强大的属性加成，会更改英雄的名称、美术及一段背景故事。从确定的池子中随机。
- 一个完整的游戏流程会有2次特殊进化，下一次进化会覆盖上一次进化的背景故事、名称、美术、特性，除了属性。
- 特性相当于另一种被动，但不会在战斗中生效，一般是在战斗结束时做一些属性上的永久提升

##### （1）战士-鲜血议会成员

|  特性名  |                         鲜血议会成员                         |
| :------: | :----------------------------------------------------------: |
|   描述   | {name}意外觉醒了上古血族的遗脉，为逃避教廷追索，被迫加入了鲜血议会，成为了这个黑暗组织中的一员 |
|   特性   | 【鲜血之拥】**离场：**每已损失10%生命值，永久获得2点最大生命值 |
|   属性   |     +40%生命偷取<br />- 30%最大生命值<br />-10% 法伤减免     |
| 遗忘技能 |                   随机失去一个已有被动技能                   |
| 获得技能 |            【风声鹤唳】**受击：**获得**狂暴(1)**             |



### 7.10 一些杂项<div id='710'>

- 英雄在初始化时，会从名字库中随机赋予1个，格式【战士 - 莱恩】，后续获得新的头衔之后将修改为【鲜血议会成员 - 莱恩】



### 7.11 额外新功能<div id='711'>

#### 7.11.1 分数统计

|     项目     |                      说明                       |          分数          |
| :----------: | :---------------------------------------------: | :--------------------: |
|    通关数    |               战斗胜利了几个关卡                |      关卡数 * 10       |
| 杀死敌人数目 |                        -                        |       敌人数 * 5       |
|   剩余生命   | 战斗结束后所有英雄剩余生命与原始生命的比值(注1) | 每剩余1% * 10* 所有关  |
|  *通关时间   |         记录每个关卡实际战斗时间的总和          | 不算分，只在通关时显示 |

**注1：**比如一场战斗结束后，三个英雄的总血量与原始总血量的比值为87%，则本关获得870分，然后再把已经获得的所有分数相加获得总分数

**注2：**分数在完全通关和战斗失败时都会出现，战斗失败只计算到上一个胜利的关卡

![image-20210926175007226](https://i.loli.net/2021/09/26/uqyMCGUB4SeYJ8K.png)



#### 7.11.2 地图信息

- 在顶部增加一个切换按键，在地图信息和属性信息中切换

![image-20210926164032746](https://i.loli.net/2021/09/26/tvoxYrDh3QBKjT6.png)

- 点击切换按键后，BottomUI切换成以下界面

![image-20210926171945780](https://i.loli.net/2021/09/26/jVlwFkyIPto5xgN.png)

| 编号 |      项目      |                        说明                        |
| :--: | :------------: | :------------------------------------------------: |
|  1   |    地图编号    |                    总种子的编号                    |
|  2   |  历史通关人数  |           统计该地图有多少人闯过最后一关           |
|  3   |     通关率     |     记录该地图通过第一关和最后一关总人数的比值     |
|  4   |    最高分数    |   显示该地图所有通关者中的最高分数和该通关者姓名   |
|  5   |    最快通关    | 显示该地图所有通关者中的最短通关时间和该通关者姓名 |
|  6   | 目前在本关人数 |       在1个小时内通过本关卡的人数统计（注2）       |
|  7   |  当前关卡标识  |        通过额外的外框标识玩家正在游玩的关卡        |

**注1**：编号2，3，4，5，6的数据在玩家通过某一关后更新数据，也就是说玩家在查看通关奖励时，在按键上绑定事件，向服务器索取当前的地图信息并更新。

**注2：**向服务器发送“正在游玩”的信息也是绑定在通关奖励的按键上，服务器通过时间戳，统计1小时内有关本张地图的“正在游玩”信息，以达到可以竞赛的效果

**注3**：一张地图，需要向服务器传输的信息有：

- 通过第一关的总人数
- 通过最后一关的总人数
- 通过最后一关时的总分数
- 通过最后一关时的总时间
- 正在哪一关游玩和时间



#### 7.11.3 新版战斗<div id='7113'>

- 当战场上的敌方单位攻速条走满时，在MP未满时默认采用【普通攻击】，MP满值时默认采用【释放主动技能】
- 当战场上的我方单位攻速条走满时，显示本隐藏在画面中间的【NewToolTips】，并调用Options_List/Action_List
- 当MP非满值时，Action_List/Action_03即【释放主动技能】隐藏，只显示另外三项
- <img src="https://i.loli.net/2021/10/13/wTrvBi79ugjp5fe.png" alt="image-20211012151510599" style="zoom: 33%;" />
- 行动逻辑（受击动画可以做回来了）

|            行为            |       该单位状态       |      其他单位状态      |
| :------------------------: | :--------------------: | :--------------------: |
| 攻速条走满并出现行动选项框 | 待机，攻速条归零并停止 |    待机，攻速条停止    |
|        执行具体行动        | 普攻或技能，攻速条停止 | 受击或待机，攻速条停止 |
|  单位又回到待机状态(注1)   |  待机，攻速条正常运作  |  待机，攻速条正常运作  |

注1：意思是要检测，该单位所选行动关联的动画，播放完重新回到待机状态后视为这次行为结束，然后所有单位的攻速条在重新开始运作。

- 战斗行动多级菜单的简单链接关系（路径Assets/Prefabs/UI/Pixel_Ver/NewToolTips.prefab/Options_List）

|             按键名             |    跳转菜单    |
| :----------------------------: | :------------: |
|     Action_List/Action_01      | Action_01_List |
|     Action_List/Action_02      | Action_02_List |
|     Action_List/Action_03      | Action_03_List |
|     Action_List/Action_04      | Action_04_List |
|   Action_01_List/Action_Back   |  Action_List   |
|   Action_02_List/Action_Back   |  Action_List   |
| Action_03_List/Choose_Skill_01 |  Choose_Unit   |
| Action_03_List/Choose_Skill_02 |  Choose_Unit   |
| Action_03_List/Choose_Skill_03 |  Choose_Unit   |
|   Action_03_List/Action_Back   |  Action_List   |
|   Action_04_List/Action_Back   |  Action_List   |
|   Choose_Unit/Action_03_Back   | Action_03_List |



##### 7.11.3.1 普通攻击

- 点击【普通攻击】后，调用NewToolTips.prefab/Options_List/**Action_01_List**

- <img src="https://i.loli.net/2021/10/12/ZEqMfujW1recHol.png" alt="image-20211012153239978" style="zoom:33%;" />

- 通过点击选项中的怪物名字，可以锁定普通攻击的对象
- 此处的排列顺序与场景中Monster1，2，3的排列顺序一致，策划在配置时也会赋予登场怪物唯一的名称
- 相关菜单的按键效果

（1）Action_01_List

|   按键名    |                  执行效果                  |
| :---------: | :----------------------------------------: |
| Monster_01  | 选定该单位为普通攻击目标。结束这一次行动。 |
| Monster_02  | 选定该单位为普通攻击目标。结束这一次行动。 |
| Monster_03  | 选定该单位为普通攻击目标。结束这一次行动。 |
| Action_Back |           跳转到菜单Action_List            |



##### 7.11.3.2 更换被动技能

- 点击【更换被动技能】后，调用NewToolTips.prefab/Options_List/**Action_02_List**，并使玩家可以在战斗中调整该行动英雄的被动技能，其他英雄的被动技能仍然无法调整
- <img src="https://i.loli.net/2021/10/12/DeIkifcnx2CRwOY.png" alt="image-20211012163935647" style="zoom:33%;" />

- 玩家在下方的被动技能栏调整完技能后，点击【确认更换】即可生效新的被动技能排序，并重新禁止该英雄调整技能
- 考虑在BottomUI中的被动技能面板上加一个小的🔒图标，用开合来提示玩家现在的状态
- 相关菜单的按键效果

（1）Action_02_List

|   按键名    |                           执行效果                           |
| :---------: | :----------------------------------------------------------: |
| Confirm_Btn | 点击后保存更换后的被动技能顺序，并重新静止在战斗中调整被动技能。结束这一次行动。 |
| Action_Back |                    跳转到菜单Action_List                     |



##### 7.11.3.3 释放主动技能

- 点击【释放主动技能】后，调用NewToolTips.prefab/Options_List/**Action_03_List**，玩家可以从已有的三个主动技能中选择一个使用。随机目标或全体目标的技能直接展示，如果是带有指向性的技能需要再调用二级菜单**Choose_Unit**进行单位选择
- 已在工单添加新需求，在原有技能目标的项目中多新增一个【是否指定】，可以配置出AllyOptionalOne和EnemyOptionalOne，系统根据技能目标类型判断二级菜单中需要展示的是我方单位或敌方单位，和展示单位的数量
- <img src="https://i.loli.net/2021/10/12/n9tG4HVMDgrB5uf.png" alt="image-20211012200339588" style="zoom:33%;" />

<img src="https://i.loli.net/2021/10/12/ov9MFS7KBCNLhir.png" alt="image-20211012200432045" style="zoom:33%;" />

- 相关菜单的按键效果
- 当光标移动到主动技能上时，下方BottomUI中的技能介绍区，出现相应主动技能的详情

（1）Action_03_List

|     按键名      |                          执行效果                          |
| :-------------: | :--------------------------------------------------------: |
| Choose_Skill_01 | 点击后即可释放主动技能。如果无需选择目标则结束这一次行动。 |
| Choose_Skill_02 | 点击后即可释放主动技能。如果无需选择目标则结束这一次行动。 |
| Choose_Skill_03 | 点击后即可释放主动技能。如果无需选择目标则结束这一次行动。 |
|   Action_Back   |                   跳转到菜单Action_List                    |

（2）Choose_Unit

|     按键名     |                           执行效果                           |
| :------------: | :----------------------------------------------------------: |
|    Unit_01     | 主动技能的单位目标，根据技能目标类型显示敌方或我方目标。结束这一次行动。 |
|    Unit_02     | 主动技能的单位目标，根据技能目标类型显示敌方或我方目标。结束这一次行动。 |
|    Unit_03     | 主动技能的单位目标，根据技能目标类型显示敌方或我方目标。结束这一次行动。 |
| Action_03_Back |                   跳转到菜单Action_03_List                   |



##### 7.11.3.3 调整受击位

- 点击【调整受击位】后，调用NewToolTips.prefab/Options_List/**Action_04_List**，玩家可以从非受击位的另外两个己方英雄中选择一个，并与当前受击位上的英雄单位交换站位
- <img src="https://i.loli.net/2021/10/12/7zoiCWkIst8jAfe.png" alt="image-20211012202726743" style="zoom:33%;" />

- DEMO版中直接不做任何额外动画的将两个单位调换位置，后期优化时加入换位动画
- 相关菜单的按键效果

（1）Action_04_List

|   按键名    |                           执行效果                           |
| :---------: | :----------------------------------------------------------: |
|   Hero_01   | 点击后即视为将选中的单位和受击位上的单位交换站位。结束这一次行动。 |
|   Hero_02   | 点击后即视为将选中的单位和受击位上的单位交换站位。结束这一次行动。 |
| Action_Back |                    跳转到菜单Action_List                     |









### 2.地图部分

定向转生

万能房间：可以指定提升和降低的属性

指定房间：提升设定好的属性，并降低可选定的属性，不同的指定房间用不同图标和颜色区分，比如地图上出现红色房间就一定是强化物攻属性

归纳房间：几类可能相同的属性归纳到一起，比如物攻和法强，让玩家再从中选择



技能奖励

指定一个英雄，从他的3个可选技能中选择1个

