# 主线剧情

### 玩家部分

由于组织上的大佬看中了海边小城闪金镇对于帮派业务的拓展前景，于是委派身为帮派分子的玩家前往闪金镇设立据点。

玩家初始会获得20万美金的脏钱，一把手枪(5/5)，一把手机

   手机功能（绿屏手机，类小灵通）：

- 拨打和接听电话
- 通讯录：（初始自带-帮派联系人Mars，负责通过打电话或者发短信的方式告知玩家打款的银行账号、发布任务、威胁玩家）
- 短信，只能收
- 后期有余力可以搞个手机游戏，贪吃蛇啥的埋个彩蛋

游戏初始在毒枭基地，玩家死亡后重新回到基地并由专人重新开车送到闪金镇。

- 玩家从基地被开车送到闪金镇会有一段简短的过场动画，大致表现是只有车窗是亮的，其他地方灯光暗淡，会有一些地标或者景色从车窗闪过，玩家可以通过这些信息反推出基地的位置（当然每局游戏出现的地标和顺序都不一样）。之后我们可以做一个解谜的大地图，也不用做场景啥的，然后让玩家根据景色来推测正确路线，继而找到基地。

帮派任务分为目标任务，定期人物，临时任务：

- 定时任务：每个月玩家都会收到Mars发来的一条短信，上面写着”x月x日前，转账xx到这个xx账户，MS-17“
    - 金额动态调整，暂定为此时玩家持有现金+存款总和的70%。
    - 定时任务允许一次拖延，未完成的款项将累计到下次的打款中。（毕竟是自己人开荒，第一次失败就砍人，不太合理）
    - 如果玩家延期一次以上，组织将怀疑玩家是否背叛了组织，开始出动杀手。
    - 第一次为1个枪手，如果被玩家杀害了，后续来的人会越来越强大，但不会多，直至派出最强杀手还不能干掉玩家，组织会联系当地黑帮出手。（**如果组织派大规模杀手进入闪金镇，会跟当地黑帮先干上，不合理**）
    - 暂定三个定时任务后游戏结束
- 临时任务：



### 城镇演化

1. **当一个城镇地图被创建时，将会预设5个家族和1位镇长**
2. **5个家族，每个家族将分配3个成员，其中1人为家族长。随机分配产业和在小镇上的位置，产业分配如下：**
   - 预设3个家族司职农场
     - 每个家族从3个产出类型中随机选择2种作为家族产业
   - 预设2个家族司职其他产业
     - 从除农场之外的3个低级产业中随机挑选
     - 2个家族的产业不重复
   - 不设个人资金，家族成员的买卖都算入家族资金，创建地图时给予家族资金。
   - 当某种产业所需的上游产业在地图中都存在时，该产业才能出现在可转型列表中，*并且市集中会上架少量该产业所出产的产品（这个不一定，主要是想搞一个机制强行制造需求，影响合适的家族招人扩张或者转型中级和高级产业）*。

##### 低级产业(原料产品)

| 产业类型 |      主产出      |   副产品   |
| :------: | :--------------: | :--------: |
|   农场   | 粮食、蔬菜、家禽 |            |
|   牧场   |       牛肉       | 肥料、皮革 |
|   矿场   |    木材、铁矿    |    煤炭    |
|    ？    |                  |            |

##### 中级产业(加工产品)

| 产业类型 | 上游产业 |     说明     |
| :------: | :------: | :----------: |
|  铁匠铺  |   矿场   | 农具、冷兵器 |
|  酿酒厂  |   农场   |     啤酒     |
|  成衣店  |   牧场   |     衣服     |
|  食品厂  |   农场   |   加工食品   |

##### 高级产业(服务行业)

| 产业类型 |  上游产业  |          说明          |
| :------: | :--------: | :--------------------: |
|   酒馆   | 酒厂、餐馆 | 消耗啤酒、消耗成品食物 |

##### 产品表（假设）

| 产品 | 产品说明 | 生产周期 | 生产消耗 | 产量浮动区间 |
| :--: | :------: | :------: | :------: | :----------: |
| 玉米 |          |   7天    |   100    |     5~10     |
| 鸡肉 |          |   15天   |   200    |     8~9      |

3. **家族在发展过程中，可以由家族长自由选择发展方向：**

   n = 产量中值(浮动产量的中间值) * 此时该产品的卖价 - 生产成本

   d = 单人单日所需最低粮食数量

   m = 产品生产周期 * 家族总人口 * d * 此时粮食的买入价格

   假设某一个家族有两项产业，且A产业的生产周期 >= B产业的生产周期，则：

   - 当 (nA+nB)/mA>=2时，说明该家族可以前往市政中心招募新成员开设新产业（待展开）
   - 当2> (nA+nB)/mA>=1时，说明该家族目前无需产业转型，且可进行少量的额外消费（待展开）
   - 当(nA+nB)/mA<1时，说明该家族目前需要进行改革，产业将免费转型。如果家族剩余现金流无法负担转型后的第一笔生产成本，这笔钱由镇长出。
     - 如果原先是农业家族，将转型为**的产业
     - 如果原先是非农业，优先转型成**产业。（待展开）

4. **镇长拥有小镇的市集，警局，市政中心的控制权。**

   ##### 市集：

   ##### 市集价目表（假设）

   |  商品  | 卖价 | 买价 | 标准价(界面不可见) | 当前库存 | 库存上限 |
   | :----: | :--: | :--: | :----------------: | :------: | :------: |
   |  玉米  |  47  |  53  |         50         |   120    |   1000   |
   | 大头菜 |  66  |  74  |         70         |    60    |   500    |
   |  鸡肉  |  95  | 105  |        100         |    70    |   100    |
   |  牛肉  | 142  | 158  |        150         |    40    |    50    |
   | 牛粪肥 |  28  |  32  |         30         |    90    |    30    |

   - 小镇所有家族的产出都会由家庭成员搬运到市集进行贩卖，所需要的其他商品也市集上获得。
   - 当市场内某一种商品达到库存上限时，市场停止收购该商品。
   - 地图创建时，市场内将会有少量的粮食库存，以满足在游戏开始时的第一个生产周期内镇上居民的食物供应。
   - 地图创建时，将为市场内的所有商品设定一个初始标准价。
   - 每一卖单会使标准价下降1%，向下取整；每一买单会使标准价上升1%，向上取整。（标准价和库存上限有相关性）
   - 买价在标准价格上浮动上调5%，显示价格向上取整；卖价在标准价格上浮动下调5%，显示价格向下取整。
   - 当大量买入或卖出时，也应按照一单一单的顺序计算价格。



---



旧案



- 人物死亡，玩家会重新回到毒枭基地选择新人物开场。

游戏初始在毒枭基地，主角死亡后会重新回到毒枭基地休息室。
人物走出基地之后就跳转到开局剧本。

开局剧本：
在镇外的郊区，黑帮两个打手，一个对接人，一辆车车上有现金。主角一人一车。

物品备注：
现金，一百万一捆，重量10斤，玩家单位只能携带10斤。
车，可驾驶，持枪单位进入后也可以车辆可以开枪。

剧本触发器：

- 玩家把车开走，不带现金视为逃跑，黑帮直接
- 玩家攻击黑帮单位，视为反抗，黑帮直接反击。
- 玩家开走自己的车带上现金视为游戏正式开始，离开一定范围后，黑帮开车离开。

玩家选择：（开放结局的设想）

- 玩家直接开走自己的车，遭到追击后，玩家可以直接进去本地黑帮的领地让他们发生枪战。
- 老老实实把黑帮的车里面的现金一次次搬到自己车上，搬多少现金就决定了该局难度。
- 玩家可以直接开走黑帮的车，黑帮的车会比主角的车好，并且车上有钱，更方便逃跑。
- 玩家在开自己车不触发新流程时候，选择撞死黑帮成员。