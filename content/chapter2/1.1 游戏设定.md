# 1.1 游戏设定

- ### 游戏中会出现的属性

| 属性（*号属性不会在界面上显示） |                             说明                             |
| :-----------------------------: | :----------------------------------------------------------: |
|             生命值              |                   当生命值为0时，单位死亡                    |
|            物伤减免             | 按百分比减免所受到的物理伤害，比如当物伤减免为30%时，100的物理伤害最终只会造成70点物伤。上限[-100%, 100%] |
|            法伤减免             |       按百分比减免所受到的魔法伤害。上限[-100%, 100%]        |
|              物攻               |                 一次普通攻击所造成的物理伤害                 |
|              法强               |                影响技能所造成的魔法伤害的数值                |
|             暴击率              |    指在一次普通攻击[非真实伤害]中发生暴击的概率。上限100%    |
|            暴击效果             | 指发生暴击时造成的伤害与原伤害的比值。比如暴击效果为250%，则一次暴击造成的伤害是原来的3.5倍。额外附加的暴击效果在原基础上相加，比如遗物效果增加40%的暴击效果，则最终暴击效果为290% |
|             闪避率              | 只能闪避物理伤害。当闪避判定成功时，将此次伤害的最终伤害修改为0 |
|              攻速               |                  两次普通攻击之间的间隔时间                  |
|             法力值              |               当法力值积满时，自动释放一次技能               |
|            生命偷取             | 对敌人造成物理伤害时，会回复相当于伤害量一定比例的生命值。比如敌人受到的最终伤害为100，生命偷取为10%，则此次攻击可回复10点生命值 |
|            治疗效果             | 影响通过技能为他人回复生命值时的最终治疗量。比如一个技能可恢复100点生命，治疗效果20%，则最终回复120点生命 |
|              护盾               | 护盾相当于是额外的生命，收到伤害时优先扣除。 护盾的数值无上限 |
|            *攻击回蓝            |              每进行一次普通攻击，回复5点法力值               |
|            *承伤回蓝            | 当生命值为生命上限的100%/80%/60%/40%/0%/时(区间)，**每受到一次伤害**，回复5/10/15/20点法力值 |
|            普攻目标             |                              -                               |
|            技能目标             |                              -                               |

- ### 属性加成方式

|   属性   |                         加成方式                         |
| :------: | :------------------------------------------------------: |
|   生命   |        原始最大生命值 * 百分比加成 + 固定数值加成        |
| 物伤减免 | 原始物伤减免 + 百分比加成[<sup>1</sup>](#gudingbaifenbi) |
| 法伤减免 |                原始法伤减免 + 百分比加成                 |
|   物攻   |           原始物攻 * 百分比加成 + 固定数值加成           |
|   法强   |           原始法强 * 百分比加成 + 固定数值加成           |
|  暴击率  |                 原始暴击率 + 百分比加成                  |
| 暴击效果 |                原始暴击效果 + 百分比加成                 |
|   攻速   |                  原始攻速 + 百分比加成                   |
| 生命偷取 |                原始生命偷取 + 百分比加成                 |
| 治疗效果 |                原始治疗效果 + 百分比加成                 |
| 攻击回蓝 |               原始攻击回蓝 + 固定数值加成                |
| 承伤回蓝 |               原始承伤回蓝 + 固定数值加成                |

注：<div id="gudingbaifenbi">【1】某些属性原本即是百分比，后续加成也是百分比，计算时需要将两个百分比直接相加</div>



- ### 伤害类型

  - **物理伤害**：由普通攻击所造成的伤害，可以被闪避，可以暴击，可以被护盾所抵挡。
  - **魔法伤害**：通过技能所造成的伤害，无法被闪避，无法暴击，可以被护盾所抵挡。
    - 特殊情况：假设一个技能时对敌方造成100点魔法伤害，附带20点物理伤害，那么这100点伤害不可闪避，附加的20点物理伤害可以被闪避
  - **真实伤害**：无法被闪避，无法暴击，护盾无法抵挡

  

- ### 普攻目标/技能目标

  - **目标前缀**：敌方，友方
    - **单体**：只对一个单位产生效果。正前方的前排单位优先，当正前方无单位时，采取从左到右，从前排到后排的顺序寻找目标
    - **前排**：对前排的所有单位产生效果，当前排无单位时，将目标转移到后排
    - **后排**：对后排的所有单位产生效果，当后排无单位时，将目标转移到前排
    - **整列**：对同一列的目标产生效果，正前方的前排单位和后排单位优先，当正前方无单位时，采取从左到右的顺序寻找目标
    - **全体**：对全体单位产生效果
    - **筛选条件 + 目标数量**：比如给生命值最低的两个友方单位加血



- ### 普通攻击-伤害链条

  - **前提：**
    - 物理伤害 = 原始物理伤害 * 额外物理伤害百分比加成 + 额外物理伤害固定数值加成
    - 暴击伤害 = 原始暴击伤害 + 额外暴击伤害加成
    - 暴击率 = 原始暴击率 + 额外暴击率加成
  - 闪避率 = 原始闪避率 + 额外闪避率加成
    - 物伤减免 = 原始物伤减免 + 额外物伤减免加成
  - **查询攻击发起者身上是否存在阻碍攻击的dot**
  - 【判定有】阻止此次攻击
    - 【判定无】执行下一条
  - **根据暴击率进行暴击判定**
  - 【判定成功】物理伤害 = 物理伤害 * ( 1 + 暴击效果 )，执行下一条
    - 【判定失败】物理伤害 = 物理伤害
  - **根据闪避率进行闪避判定**
    - 【判定成功】物理伤害 = 0
    - 【判定失败】物理伤害 = 物理伤害
  - **查询被攻击者身上是否存在护盾**
    - 【存在护盾】物理伤害 = 护盾值 - 物理伤害 >= 0 ? 0 : 物理伤害 - 护盾值，并扣除相应数值的护盾值。若物理伤害>0则执行下一条
    - 【不存在护盾】物理伤害 = 物理伤害，执行下一条
  - **根据物伤减免属性对物理伤害进行减免**
    - 物理伤害 = 物理伤害 * ( 1 - 物伤减免 )
  - **最终伤害 = 物理伤害**
  - **如果普通攻击中带有非物理类型的伤害，则按对应的伤害类型进行伤害判定**




- ### 技能攻击-伤害链条

  - **前提：**
    - 法强 = 原始法强 * 额外法强百分比加成 + 额外法强伤害固定数值加成
    - 魔法伤害 = 根据技能说明而定，说明中会使用到法强
  - **攻击发起者的能量值满值后才可进行下一条**
  - **查询被攻击者身上是否存在护盾**
    - 【存在护盾】魔法伤害 = 护盾值 - 物理伤害 >= 0 ? 0 : 魔法伤害 - 护盾值，并扣除相应数值的护盾值。若魔法伤害>0则执行下一条
    - 【不存在护盾】魔法伤害 = 魔法伤害，执行下一条
  - **根据法伤减免属性对魔法伤害进行减免**
    - 魔法伤害 = 魔法伤害 * ( 1 - 法伤减免 )
  - **最终伤害 = 魔法伤害**
  - **如果技能攻击中带有非魔法类型的伤害，则按对应的伤害类型进行伤害判定**

  

- ### 真实伤害-伤害链条

  - 真实伤害不受任何加成，也不受任何阻挡，直接对目标单位的生命值进行削减



- ### 负面效果

| 属性 | 持续时间 | 最大叠加层数 |                             说明                             |
| :--: | :------: | :----------: | :----------------------------------------------------------: |
| 中毒 |    5     |      5       |               造成每秒2*【叠加层数】点真实伤害               |
| 麻痹 |    5     |      1       |          每次普通攻击前进行判定，20%的概率无法出手           |
| 眩晕 |    5     |      1       |          每次普通攻击前进行判定，100%的概率无法出手          |
| 迟缓 |    5     |      1       |                         攻击速度减半                         |
| 虚弱 |    5     |      1       |                          攻击力减半                          |
| 流血 |    5     |      1       |                生命值无法通过任何手段进行回复                |
| 濒死 |    5     |      1       | 在效果持续时间内如果血量下降到5%或以下，立即受到99999点真实伤害 |
| 致盲 |    5     |      1       |            在效果持续时间内的所有攻击目标指向自己            |
