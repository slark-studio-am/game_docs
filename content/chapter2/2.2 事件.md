# 2.2 事件

### 2.2.1 目录

- [<div>2.2.2 地图规则</div>](#222)
- [<div>2.2.3 初始选择</div>](#223)
- [<div>2.2.4 界面展示</div>](#224)
- [<div>2.2.5 打开背包</div>](#225)
- [<div>2.2.6 关卡配置</div>](#226)
- [<div>2.2.7 回合配置</div>](#227)
- [<div>2.2.8 获取单位事件</div>](#228)
- [<div>2.2.9 战斗事件</div>](#229)
- [<div>2.2.10 营地事件</div>](#2210)
- [<div>2.2.11 挖宝事件</div>](#2211)
- [<div>2.2.12 人物强化事件</div>](#2212)
- [<div>2.2.20 卡牌效果</div>](#xgc)
- [<div>2.2.21 强化效果池</div>](#221)

### 2.2.2 地图规则<div id="222">

##### 规则

（1）开场时，系统将从玩家已解锁的所有英雄中随机选取3个英雄，交由玩家3选1。随机分配给玩家3个N级随从或武器，从中选取一个作为初始随从。

（2）在地图上可以配置战场。战场一共有六个卡槽，当单位卡被放置到卡槽后，只能移动在战场内的位置。

（3）当六个槽位都放满单位后，无法再放入或直接更换新的单位，如需更换单位，需要先从战场上选择一个单位放逐，然后再从额外卡牌集合中挑选一个单位置入战场，被放逐的卡牌将从本局游戏中消失,获得放逐补偿，根据放逐的卡牌稀有度来执行相应等级的放逐补偿

（4）当一张地图上的事件卡被确定使用时，根据卡牌的事件能量点数将会有等量的能量点随机飞向其他事件卡，事件卡每被击中1点，其事件能量点便下降1点，当事件能量点为0时，该事件卡从地图上消失。空缺的部分不会有新的事件卡进行补充。

（5）人物等级每打完一关升1级，怪物等级普遍在N至N+2之间浮动，N为回合数。

（6）每关的第五回合为BOSS战，胜利后会随机获得一个SR及以上等级的神器

（7）根据初始选择页面选择的英雄，将对应的英雄头像、英雄生命值、英雄等级在地图页面上显示，并将初始选择页面中的随从或武器置入背包中，使其在打开背包时可以被查看。



### 2.2.3 初始选择<div id="223">

![image-20210406143248881](https://tva1.sinaimg.cn/large/008eGmZEly1gpa0gxahylj30cl0lzgn7.jpg)

（1）该页面在主页面点击开始游戏之后，进入地图界面之前

（2）英雄和随从的界面暂时没有绘制上去，先用旧版的代替

（3）默认选择第一个英雄和第一个单位，点击开始按键后跳转到地图界面

##### table_init_choice

|      字段名      |     字段      |             值说明             |      值示例       |
| :--------------: | :-----------: | :----------------------------: | :---------------: |
|   可选英雄数量   |  hero_count   |               -                |         4         |
|     英雄来源     | hero_group_id | 从给定的分组中随机挑选一定数量 | group_hero_unlock |
| 可选初始单位数量 |  unit_count   |               -                |         3         |
|     单位来源     | unit_group_id | 从给定的分组中随机挑选一定数量 |   group_unit_N    |



### 2.2.4 界面展示<div id="224">

![image-20210406143316327](https://tva1.sinaimg.cn/large/008eGmZEly1gpa0hcr4wyj30cl0lzt9p.jpg)

### 2.2.5 打开背包<div id="225">

![image-20210317171347980](https://i.loli.net/2021/03/17/LNtP4OdCrnpWfV2.png)

（1）可以在战场标签上配置战场的站位和增删已有的单位。战场放逐的补偿。

|  字段名   |         字段         |           值            |
| :-------: | :------------------: | :---------------------: |
|  N卡补偿  |  exile_compensate_N  |     英雄生命值 +50      |
|  R卡补偿  |  exile_compensate_R  |     英雄生命值 +100     |
| SR卡补偿  | exile_compensate_SR  | 随机获得1个N级别的神器  |
| SSR卡补偿 | exile_compensate_SSR | 随机获得1个SR级别的神器 |



### 2.2.6 关卡配置<div id="226">

|   字段名   |    字段     |           值说明           |                          值示例                           |
| :--------: | :---------: | :------------------------: | :-------------------------------------------------------: |
|  关卡编号  |  stage_id   |             -              |                         stage_01                          |
| 回合编号组 | round_group | 包含本关所有回合编号的数组 | [ round_101, round_102,  round_103, round_104, round_105] |

（1）第五个回合限定为boss关，战斗成功后切换到下一个关卡

（2）boss关无特殊配置，依照正常的回合配置即可



### 2.2.7 回合配置<div id="227">

|      字段名      |           字段           |                            值说明                            |            值示例             |
| :--------------: | :----------------------: | :----------------------------------------------------------: | :---------------------------: |
|     回合编号     |         round_id         |                示例的101表示第一关的第一回合                 |           round_101           |
| 事件顺序是否打乱 |      shuffle_order       |          选择否时，按先获取单位后特殊事件的顺序排列          |             true              |
| 获取单位事件集合 |      get_unit_group      | 事件编号的数组，从数组中不重复的取出6个值，当数组长度不满6时，允许重复 |  [ MapCard_get_unit_101... ]  |
|   战斗事件集合   |   battle_MapCard_group   |          事件编号的数组，从数组中不重复的取出1个值           |    [ MapCard_battle_101 ]     |
| 人物强化事件集合 | strengthen_MapCard_group |          事件编号的数组，从数组中不重复的取出1个值           |  [ MapCard_strengthen_101 ]   |
|   营地事件集合   |   update_MapCard_group   |          事件编号的数组，从数组中不重复的取出1个值           |     [ MapCard_relax_101 ]     |
|   特殊事件集合   |  special_MapCard_group   |          事件编号的数组，从数组中不重复的取出1个值           | [ MapCard_strengthen_101... ] |



### 2.2.8 获取单位事件<div id="228">

|      字段名      |     字段      |                 值说明                  |         值示例         |
| :--------------: | :-----------: | :-------------------------------------: | :--------------------: |
|     事件编号     |  MapCard_id   | 示例的101表示第一关的第一个获取单位事件 |  MapCard_get_unit_101  |
|     事件标题     | MapCard_title |                    -                    |        招募单位        |
| 事件能量点最大值 |   max_point   |         能量点随机范围的最大值          |           3            |
| 事件能量点最小值 |   min_point   |         能量点随机范围的最小值          |           2            |
|     单位来源     | unit_group_id |   从所给定的单位分组中随机选择1个单位   |   group_attendant_N    |
|     卡面效果     |    card_se    |     事件卡被能量点击中后的额外效果      | [<div>坚韧</div>](#jr) |
|   卡牌背景图片   |  card_color   |       卡牌在界面中显示的背景图片        |     battle_bg.png      |

![image-20210322183155736](https://i.loli.net/2021/03/22/bSgikKPCNmdxtEw.png)

### 2.2.9 战斗事件<div id="229">

|      字段名      |       字段        |                            值说明                            |       值示例        |
| :--------------: | :---------------: | :----------------------------------------------------------: | :-----------------: |
|     事件编号     |    MapCard_id     |             示例的101表示第一关的第一个战斗事件              | MapCard_battle_101  |
|     事件标题     |   MapCard_title   |                              -                               |        战斗         |
|     主怪来源     |   boss_group_id   |         从所给定的单位分组中随机选择1个单位作为主怪          |  group_attendant_R  |
| 其他怪物数最大值 | max_monster_count |                 除主怪外其他怪物的数量最大值                 |          5          |
| 其他怪物数最小值 | min_monster_count |                 除主怪外其他怪物的数量最小值                 |          5          |
|   其他怪物来源   | monster_group_id  |       从所给定的单位分组中随机选择N个单位作为其他怪物        |  group_attendant_N  |
|    是否有奖励    |     is_award      |                    战斗胜利后是否有战利品                    |        true         |
|     奖励数量     |    award_count    |                         战利品的数量                         |          2          |
|   战利品1来源    |    award_group    | 根据选择的奖励数量展开对应数量的来源，来源为单位或神器的分组id | random(N级神器卡组) |
|   战利品2来源    |    award_group    | 根据选择的奖励数量展开对应数量的来源，来源为单位或神器的分组id | random(N级神器卡组) |
|       备注       |     界面欠缺      |                                                              |                     |

![image-20210322183229464](https://i.loli.net/2021/03/22/rhbANKUMo5aB1uY.png)



### 2.2.10 营地事件<div id="2210">

|         字段名          |       字段       |                    值说明                     |              值示例               |
| :---------------------: | :--------------: | :-------------------------------------------: | :-------------------------------: |
|        事件编号         |    MapCard_id    |      示例的101表示第一关的第一个营地事件      |         MapCard_relax_101         |
|        事件标题         |  MapCard_title   |                       -                       |             休憩营地              |
|    事件能量点最大值     |    max_point     |            能量点随机范围的最大值             |                 8                 |
|    事件能量点最小值     |    min_point     |            能量点随机范围的最小值             |                 4                 |
|       单次升级数        |   once_update    |            目标单位单次提升多少级             |                 1                 |
|      初始生命回复       | initial_recovery |              无加成下的生命恢复               |                10                 |
| 每1能量点减少增生命回复 | appendl_recovery | 卡牌能量点每减少1点，可恢复生命值便增加相应值 |                 3                 |
|        卡面效果         |     card_se      |        事件卡被能量点击中后的额外效果         | random([<div>效果池</div>](#xgc)) |
|      卡牌背景图片       |    card_color    |          卡牌在界面中显示的背景图片           |             sp_bg.png             |

![image-20210322152558611](https://i.loli.net/2021/03/22/doIGB9ykx7sSMTa.png)



### 2.2.11 挖宝事件<div id="2211">

|      字段名      |      字段       |                值说明                 |              值示例               |
| :--------------: | :-------------: | :-----------------------------------: | :-------------------------------: |
|     事件编号     |   MapCard_id    |  示例的101表示第一关的第一个挖宝事件  |        MapCard_unearth_101        |
|     事件标题     |  MapCard_title  |                   -                   |               挖宝                |
| 事件能量点最大值 |    max_point    |        能量点随机范围的最大值         |                 8                 |
| 事件能量点最小值 |    min_point    |        能量点随机范围的最小值         |                 4                 |
|   挖掘失败概率   |    fail_per     |   挖掘失败的概率，需要显示在界面上    |                40%                |
|   神器1稀有度    | artifact_1_rare |                   -                   |           random(N, R)            |
|    神器1概率     | artifact_1_per  | 挖掘神器1的成功概率，需要显示在界面上 |                40%                |
|   神器2稀有度    | artifact_2_rare |                   -                   |           random(R, SR)           |
|    神器2概率     | artifact_2_per  | 挖掘神器2的成功概率，需要显示在界面上 |                20%                |
|     卡面效果     |     card_se     |    事件卡被能量点击中后的额外效果     | random([<div>效果池</div>](#xgc)) |
|   卡牌背景图片   |   card_color    |      卡牌在界面中显示的背景图片       |             sp_bg.png             |

注：挖掘失败、神器1概率、神器2概率相加需要等于1 

![image-20210312164009285](https://i.loli.net/2021/03/12/1F7Wbcu3vhoQR6N.png)



### 2.2.12 人物强化事件<div id="2212">

|      字段名      |     字段      |                值说明                |              值示例               |
| :--------------: | :-----------: | :----------------------------------: | :-------------------------------: |
|     事件编号     |  MapCard_id   | 示例的101表示第一关的第一个补血事件  |      MapCard_strengthen_101       |
|     事件标题     | MapCard_title |                  -                   |             英雄强化              |
| 事件能量点最大值 |   max_point   |        能量点随机范围的最大值        |                 8                 |
| 事件能量点最小值 |   min_point   |        能量点随机范围的最小值        |                 4                 |
|     选择数量     | choice_count  |         可选择的强化效果数量         |                 4                 |
|     效果等级     | effect_level  |        强化效果数值的效果等级        |                 3                 |
|     效果来源     | effect_group  | 根据数量从效果来源中不重复的随机抽取 |   [<div>强化效果池</div>](#221)   |
|     卡面效果     |    card_se    |    事件卡被能量点击中后的额外效果    | random([<div>效果池</div>](#xgc)) |
|   卡牌背景图片   |  card_color   |      卡牌在界面中显示的背景图片      |             sp_bg.png             |

![image-20210319220840670](https://i.loli.net/2021/03/19/LMTdGhoQmaDsVNj.png)



### 2.2.20 卡面效果池<div id="xgc">

|      效果名       |                          效果                          |      |
| :---------------: | :----------------------------------------------------: | :--: |
|       爆炸        | 被任意能量点击中后，卡牌立刻消失，并释放所有事件能量点 |      |
| 坚韧<div id="jr"> |                 事件能量点不会小于1点                  |      |
|       稳定        |                     能量点永远为1                      |      |
|       常规        |                           -                            |      |



### 2.2.21 强化效果池<div id="221">

|        效果        | 权重 | 效果数值上限 | 效果数值下限 |
| :----------------: | :--: | :----------: | :----------: |
|   增加生命值上限   |  1   |   等级×20    |   等级×10    |
|    增强法伤减免    |  1   |   等级x2%    |   等级x1%    |
|      增加法强      |  1   |   等级×10    |    等级×5    |
|      增加物攻      |  1   |   等级×10    |    等级×5    |
|    增加暴击效果    |  1   |   等级x10%   |   等级x5%    |
|      增快攻速      |  1   |   等级x5%    |   等级x3%    |
| 增加生命值每级加成 |  2   |   等级x10    |    等级x5    |
|    增强物伤减免    |  2   |   等级x2%    |   等级x1%    |
|  增加物攻每级加成  |  2   |    等级×5    |    等级×1    |
|  增加法强每级加成  |  2   |    等级×5    |    等级×1    |
|     增加闪避率     |  2   |   等级x2%    |   等级x1%    |
|     提高暴击率     |  3   |   等级x2%    |   等级x1%    |
|    增加生命偷取    |  3   |   等级x5%    |   等级x1%    |
|   减少法力值上限   |  3   |    等级x2    |    等级x1    |

注：权重越高随机到的概率越低，具体随机法程序可自由发挥。。。