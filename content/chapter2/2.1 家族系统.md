# 家族系统

管理人物、家族、队伍关系。

## 家族属性

| 属性     | 说明 |
| -------- | ---- |
| 名称     |      |
| 旗帜     |      |
| 所属队伍 |      |

#### 队伍属性

| 属性     | 说明                             |
| -------- | -------------------------------- |
| 队伍关系 | 与每个势力关系独立（中立、敌对） |
| 成员势力 |                                  |



## 初始规则

- 家族默认队伍为自己，中立被动。
- A所在队伍与B所在队伍处于非敌对关系，A攻击B，则双方所在队伍变为敌对关系。
- 同一个队伍内的家族为同盟关系。
- 家族可以自建队伍或者加入其他队伍。
- 队伍之间没有同盟关系，只有中立和敌对关系。



## 预置势力

- 中立被动

- 中立敌对



## 应用场景

- 伤害判定
- 人物脚本判断



## 家族产业转型判定

判定条件

- 连续几个周期内（如连续5个7天）家族的结余资金（除去购买食物和生产成本）低于城镇所有家族的平均水平
- 连续几个周期内家族的产业利润低于所有家族的平均水平



选择产业

- 如果原先是农业家族，优先将旗下利润较低的产业转型为市场接受度最高的产业（售价销量或利润，这个还要学习下）。比如A家族旗下产业为粮食、家禽，粮食利润低于家禽利润，则将粮食产业转型为市场接受度最高的产业。
- 如果原先是非农业，优先转型成市场接受度前二的农业产业。比如一开始开酒厂，现在转为粮食和蔬菜。