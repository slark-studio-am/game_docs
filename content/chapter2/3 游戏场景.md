# 3.0 游戏场景

### 3.0 目录

- [<div>3.1 战场效果规则</div>](#31)
- [<div>3.2 单位格子类型</div>](#32)


### 3.1 战场效果规则<div id="31">

##### （1）画面效果

|     动作     |                           画面效果                           |
| :----------: | :----------------------------------------------------------: |
|   普通攻击   | 整张卡牌朝敌人方向移动1/5个卡牌长边的长度后，再恢复原状，整个过程0.5s |
|     受击     | 整张卡牌朝敌人反方向移动1/5个卡牌长边的长度后，根据技能特效或普攻特效在相应落点处触发特效，<br />持续0.3s，再恢复原状，整个过程0.5s |
| 发动主动技能 |       卡面上的单位图像放大后，再恢复原状，整个过程0.5s       |
|   死亡特效   | 播放死亡动画0.5s后，变成两半的卡面一边向两边移动一边淡出，持续1s |
|  复活或召唤  |                   1s内从战场的空位淡入卡牌                   |

注：以上动效中关于移动距离和时间的数值均为凭主观感觉写下，实际数值需要到开发环境中慢慢微调

**普通攻击**

![攻击形态](https://i.loli.net/2021/03/24/RgUEjxHLYtDN8an.gif)

##### 普通攻击受击

![img](https://i.loli.net/2021/03/24/bRLpUBd9Z1auq5N.gif)

##### 释放技能

![img](https://i.loli.net/2021/03/24/Dquj2aSkpKwxreH.gif)

##### （2）音效

|     动作     | 画面效果 |
| :----------: | :------: |
|   普通攻击   | 大众音效 |
| 普通攻击受击 | 大众音效 |
| 发动主动技能 | 大众音效 |
|   技能受击   | 大众音效 |

先都弄大众音效，后面看下工作量和素材，充裕的话，在每个技能特效上加字段再独立绑定技能音效

##### （3）浮动文字

初版定义，待实装之后根据效果再做位置调整

|     伤害     |                 文字效果                  |   起点   | 平移方向 | 出现到淡出时间 |
| :----------: | :---------------------------------------: | :------: | :------: | :------------: |
|   普通攻击   |               白色，勾黑边                | 卡牌中心 |   向上   |      0.5s      |
| 普通攻击暴击 | #d12929，勾黑边，文本末尾带感叹号，字号+2 | 卡牌中心 |   向上   |      0.5s      |
|   技能伤害   |          #1da3d6，勾黑边，字号+2          | 卡牌中心 |   向上   |      0.5s      |
|   生命回复   |      #7ce687，勾黑边，文本前端带加号      | 卡牌中心 |   向上   |      0.5s      |

##### （4）友方血条

![image-20210324170707840](https://i.loli.net/2021/03/24/iJ4l5h6Ss1FTvuW.png)

|             项目             |                             说明                             |
| :--------------------------: | :----------------------------------------------------------: |
|           血条颜色           |                友方所有单位的血条颜色均为绿色                |
|       被攻击时血条变化       | 在被攻击的瞬间，先根据伤害数值占最大生命值的百分比将该部分的血条颜色改为浅绿色，然后浅绿色的部分逐渐收缩，最后变为空白 |
|        回血时血条变化        | 在被治疗的瞬间，先根据治疗数值占最大生命值的百分比将该部分的血条颜色改为浅绿色，然后绿色部分逐渐占满浅绿色块 |
| 动画过程中再次被攻击或者回血 |                        增大浅绿色区域                        |



##### （5）敌方血条

![image-20210324170032714](https://i.loli.net/2021/03/24/AK37WIpeg6k1Pwm.png)

|             项目             |                             说明                             |
| :--------------------------: | :----------------------------------------------------------: |
|           血条颜色           |                敌方所有单位的血条颜色均为红色                |
|       被攻击时血条变化       | 在被攻击的瞬间，先根据伤害数值占最大生命值的百分比将该部分的血条颜色改为浅红色，然后浅红色的部分逐渐收缩，最后变为空白 |
|        回血时血条变化        | 在被治疗的瞬间，先根据治疗数值占最大生命值的百分比将该部分的血条颜色改为浅红色，然后红色部分逐渐占满浅红色块 |
| 动画过程中再次被攻击或者回血 |                        增大浅红色区域                        |



##### （6）法力条

![image-20210322120023820](https://i.loli.net/2021/03/22/KewIoLAHs1rUglJ.png)

|    项目    |                             说明                             |
| :--------: | :----------------------------------------------------------: |
| 法力条颜色 |                      所有法力条均为蓝色                      |
| 积攒法力条 | 被攻击或攻击时根据回复法力值占最大法力值百分比增长相应的蓝色区块 |
| 满载法力条 | 蓝条积满时整体会变成浅蓝色，并停留0.2s后，才可施放主动技能。如果0.2s后主体因特殊效果无法立刻施放主动技能，则间隔0.2s在蓝色和浅蓝色之间变换法力条的颜色 |
| 释放技能后 |             在释放完主动技能后，蓝色区块全部清空             |



##### （7）获得护盾的血条（敌我双方适用）

![image-20210324170731722](https://i.loli.net/2021/03/24/lbovxsgKhV4ELi2.png)

|     项目     |                             说明                             |
| :----------: | :----------------------------------------------------------: |
| 护盾部分颜色 |                             灰色                             |
| 护盾部分长度 |         根据获得的护盾数占最大生命值的百分比作为长度         |
|  失血时护盾  | 直接在血量的最左边添加护盾区块，血量显示的数值是（实际血量+护盾值） |
|  满血时护盾  | 从血条的最右边向左覆盖护盾区块，血量显示的数值是（最大生命值+护盾值） |



##### （8）攻速具象显示



![image-20210322143251275](https://i.loli.net/2021/03/22/5p2cQGOEi43mxBe.png)

|        项目        |                             说明                             |
| :----------------: | :----------------------------------------------------------: |
| 普通攻击倒计时起点 |                          12点钟位置                          |
|        规则        | 根据单位的攻击速度，将外圈填满，填满后即可发动一次普通攻击，并开始下一次循环 |



##### （9）特定BUFF或技能类型的特效

**特效落点的位置**

| 落点位置编号 |                           生效位置                           |
| :----------: | :----------------------------------------------------------: |
| location_01  |            贴图与原画的中心重合，并被压在原画下方            |
| location_02  | 贴图与原画顶部的中心重合，并被压在原画上方(原画纵向等分的上部中点) |
| location_03  | 贴图与原画中部的中心重合，并被压在原画上方(原画纵向等分的中部部中点) |
| location_04  | 贴图与原画底部的中心重合，并被压在原画上方(原画纵向等分的下部中点) |

![image-20210324120005529](https://i.loli.net/2021/03/24/m25KUJ16NsRvqAS.png)

|     开始条件     | 落点位置编号 |                          特效说明                          |           结束条件           |
| :--------------: | :----------: | :--------------------------------------------------------: | :--------------------------: |
|  发生攻速加快时  | location_01  | 将放大的原画做涂红和朦胧处理，营造围绕原画轮廓发红光的效果 | 攻速变回战斗开始前的原始攻速 |
| 发生生命值回复时 | location_04  |                     绿光加号往上飘特效                     |           持续0.5s           |
| 发生法力值回复时 | location_03  |                          蓝光贴图                          |           持续0.2s           |
|   获得debuff时   | location_04  |                          紫光贴图                          |  直到身上所有debuff时间结束  |
|  护盾值变为0时   | location_03  |                          碎盾动画                          |          动画结束后          |

注1：当有多个落点相同的特效冲突时，以触发事件的先后顺序来确定贴图的层级，越早发生的效果贴图在越底层

注2：关于BUFF和DEBUFF的我设想归纳出一些常用的BUFF，赋予特定的特效动画，比如中毒，冻结之类的，制作技能时多复用这些特效。另外的一些不重要的特定buff就不搞特效，此处待填充内容时补充

##### （10）普通攻击目标特效

|    目标    | 落点位置编号 | 特效  |
| :--------: | :----------: | :---: |
|    单个    | location_03  | 特效1 |
| 多个非全部 | location_03  | 特效1 |
|    整排    | location_03  | 特效2 |
|    整列    | location_03  | 特效2 |
|  敌方全体  | location_03  | 特效3 |

注：具体效果有了相关的素材之后再确定

### 3.2 单位格子类型<div id="32">

归纳描述不同场景下的格子的交互方式，无法区分交互效果是做在场景内部还是格子上，由程序自由定夺。

|       字段名       |      字段       |                          值说明                          |
| :----------------: | :-------------: | :------------------------------------------------------: |
|      点按格子      |    press_box    |                点按格子内的卡牌产生的效果                |
|      长按格子      |    hold_box     |                长按格子内的卡牌产生的效果                |
|   长按并拖动格子   |    move_box     |             长按并拖动格子内的卡牌产生的效果             |
|      选中效果      | selected_effect |             点按中的选中效果所呈现的界面样式             |
| 格子组中是否为单选 | selected_count  | 在一组格子中，点按中的选中效果所选择的格子数量是否为单选 |

##### （1）适用场景：战场、背包中的查看单位卡牌、首页查看图鉴

![image-20210318144749295](https://i.loli.net/2021/03/18/UhJndb3HLKAZVMO.png)

|      交互方式      |   效果描述   |
| :----------------: | :----------: |
|      点按格子      | 弹出卡牌详情 |
|      长按格子      | 弹出卡牌详情 |
|   长按并拖动格子   |    无效果    |
|      选中效果      |      无      |
| 格子组中的选中数量 |      无      |

##### （2）适用场景：初始英雄及单位、升级卡牌事件、高级人才市场事件

![image-20210318151523979](https://i.loli.net/2021/03/18/iyLEI27OnGovMCt.png)

|      交互方式      |             效果描述              |
| :----------------: | :-------------------------------: |
|      点按格子      |             选中效果              |
|      长按格子      |           弹出卡牌详情            |
|   长按并拖动格子   |              无效果               |
|      选中效果      |     默认或&&居中显示卡牌属性      |
| 格子组中的选中数量 | 根据所需要的场景选择true or false |

附注1：默认的选中效果为深色遮罩；居中显示卡牌属性，比如在高级人才事件中，需要读取卡牌属性中的稀有度来显示对应的卡牌价值。

附注2：挖宝事件虽然不属于单位格子的讨论范围，但选中效果与此处一致，只不过挖宝事件的格子读取的不是单位卡牌信息，而是事件属性里的内容

##### （3）适用场景：背包中的修改战场配置

![image-20210318152032613](https://i.loli.net/2021/03/18/LQ2eAWVCNDkl9M4.png)

|   战场区交互方式   |             战场区效果描述             |
| :----------------: | :------------------------------------: |
|      点按格子      | 非英雄单位询问是否放逐；英雄单位无效果 |
|      长按格子      |              弹出卡牌详情              |
|   长按并拖动格子   |                交换位置                |
|      选中效果      |                   无                   |
| 格子组中的选中数量 |                   无                   |

|   手牌区交互方式   |                        战场区效果描述                        |
| :----------------: | :----------------------------------------------------------: |
|      点按格子      | 战场区未满的情况下询问是否加入战场；战场区已满的情况下无效果 |
|      长按格子      |                         弹出卡牌详情                         |
|   长按并拖动格子   |                            无效果                            |
|      选中效果      |                              无                              |
| 格子组中的选中数量 |                              无                              |

##### （4）单位卡牌详情

![image-20210322182017337](https://i.loli.net/2021/03/22/78RnLJc6DVjY2aA.png)


