# 游戏规划



### 阶段划分

|       阶段目标       |                              PP                              |                        KK                        |
| :------------------: | :----------------------------------------------------------: | :----------------------------------------------: |
| 基础游戏元素补充完整 | 将每一个元素具体的参数，运行模式，交互界面一一写完整，可以适当填写模拟数据 |                                                  |
|   提炼整合游戏元素   | 将前一步完成的相对完整的游戏元素描述提炼整合成一个个单独的组件和动作 | 将文档中的内容在代码中封装成脚本以供快速绑定使用 |
|       测试组件       |   制作对应元素的预制体。在unity中将组件绑上预制体进行测试    |             根据测试反馈修改明显bug              |
|       地图生成       |    拟出一份基础的地图生成规则，包含元素如何分布摆放之类的    |             根据生成规则在代码中实现             |
|  测试基础功能游戏性  |                           测试游戏                           |             根据测试反馈修改明显bug              |
|    开始添加骚操作    |                         丰富游戏内容                         |                   丰富游戏内容                   |


### 游戏地图

[![BO9hB4.png](https://s1.ax1x.com/2020/11/10/BO9hB4.png)](https://imgchr.com/i/BO9hB4)

1. 游戏地图按如图所示意的划分成核心岛屿、公共岛屿、私人岛屿、未探索岛屿四种类型的海岛。

   - 核心岛屿：整个群岛的主要设施所在地（市集-买卖，岛主府-雇人、买地 等）。
     - 玩家无法在此岛进行建设
     - 此岛的资源元素可以被采集，但不会再生。
     - 此岛可以和除未探索岛屿外的岛屿连接
     - 此岛不限制最大可以与多少岛屿连接
   - 公共岛屿：资源元素丰富的岛屿，会有同种资源成片的资源区 
     - 玩家可以在此岛进行建设（抢占资源岛，守住隘口。。。）
     - 此岛的资源元素可以被采集，会再生。
     - 此岛可以和除未探索岛屿外的岛屿连接
     - 此岛不限制最大可以与多少岛屿连接
   - 私人岛屿：玩家进入游戏时会被分配一处私人岛屿，岛屿上已经建好一座家族基地。之后也可以向岛主购买其他的私人岛屿
     - 玩家可以在此岛进行建设
     - 此岛的资源元素可以被采集，但不会再生。
     - 此岛可以和除未探索岛屿外的岛屿连接
     - 此岛不限制最大可以与多少岛屿连接

   

   补充内容，不写难受，一开始可以不要有，先记录

   - 未探索岛屿：初始不与其他岛屿连接，玩家可以通过渡船航行到岛上进行冒险开荒
     - 开荒完成后会有玄学的桥把他和除了私人岛屿外的其他岛屿连接
     - 需要设计：造船
   - 在核心岛和所有的公共岛屿部署警察局，警察局内有一定数量的警察作日常巡逻
     - 定期会有巡逻队从公共岛屿的警察局出发路过各个私人岛，可以根据岛的分布设计多几套路线，混着轮换，给玩家增加一点记忆成本
     - 巡逻的警察拥有扇形视野和圆形听觉场，视野看见违法行为（暂定打人、抢劫车）会启动抓捕，听觉听到响动会将扇形视野转向声音发出的方向
     - 被抓捕有以下几种情况可选择：
       - 拒捕，在没人看见的情况下，把警察也干掉就行。但警察的装备一般会在大多数情况下强过玩家（此处看如何动态调整）
       - 老老实实蹲监狱，按照情节轻重关上一段事件，可以通过金钱赎回成员
       - 转身就跑待议
     - 增援行为待议



### 资源采集

1. 所有资源元素明雷显示，采集方式就是使用徒手或者工具对资源元素进行攻击，资源元素生命值耗尽后掉落物品，然后将掉落的物品搬运到家族基地的地方。

   [![BO9c90.png](https://s1.ax1x.com/2020/11/10/BO9c90.png)](https://imgchr.com/i/BO9c90) [![BO9sNn.png](https://s1.ax1x.com/2020/11/10/BO9sNn.png)](https://imgchr.com/i/BO9sNn)

   ​                                  																								

2. 采集能力的提升就是通过更换不同的工具，比如徒手对矿石的伤害为1，装备锄头后伤害为4。

3. 搬运能力的提升暂时也是通过穿装备提升负重能力，拿更多的东西

4. 初始设定两种资源元素，矿石和树木，两种元素都是被攻击到生命值为0时，掉落一个写着10的物品，不同的元素物品图标不同，物品上写着包含的数量。

5. 资源元素广泛存在于各个海岛之上，玩家可优先清理自己所在岛屿上的资源元素。玩家可以通过如下手段在自己岛屿资源匮乏后获取资源：
   - 买新岛屿
   - 到公共岛屿采集
   - 到中心岛的市集上购买
   - 去已被购买但不属于自己的私人岛上偷采



### 物品的制造与房屋建造

- 物品制造
  - 所有资源必须运送到家族基地里才能被当作制作材料识别，家族基地兼有一个储藏物品的功能
  - 物品制造时，直接从家族基地内玄学消耗材料，然后制造出的物品也玄学出现在家族基地中
  - 物品制造里的大件物品如船之类的，被制造出来以后也是和其他物品一样，存放在家族基地中，也是按一小格来计算。当玩家从家族基地选中他们并在地图上指定一个地方放置他们时，并不是像普通物品被丢弃时一个图标显示在地图中一样，而是展开显示真实比例的贴图
  
  [![BvCM60.png](https://s1.ax1x.com/2020/11/11/BvCM60.png)](https://imgchr.com/i/BvCM60)
  
  - 该功能是纯界面操作，直接从UI按键上唤起类似下图的制作列表

[![BO9yhq.png](https://s1.ax1x.com/2020/11/10/BO9yhq.png)](https://imgchr.com/i/BO9yhq)

- 房屋建造

  - 在建造列表中选择需要建造的房屋，然后就会出现一个建筑模型的虚影，可以拖动这个虚影将房屋摆放到可以建造的地方。

  - 小人从家族基地将所需要的材料搬运到这个虚影里面，当所需要的材料都满足时，再转满一个进度条之类的，建筑便建造完毕。

    [![BO9g3V.png](https://s1.ax1x.com/2020/11/10/BO9g3V.png)](https://imgchr.com/i/BO9g3V)






### 需完善的基础游戏元素

- 资源
  - 铁矿：掉落产物 10 铁矿石
  - 树木：掉落产物 10 木头
  - 之后会增加的资源就是种类不同，比如说金矿石，但单个种类的资源没有等级的区分。多种资源的区别体现在所制造物品的数值和所制造物品的复杂度上。举个栗子，10个金矿石造出金斧头的攻击力比10个铁矿石制造的铁斧头高。制造一块芯片需要金银铜铁硅多种资源组合制造。
  - 手工搬运资源发展都后面会出现资源专属采集建筑，通过公路与家族基地相连，采集到一定数量后由建筑配套的小车送到家族基地。建筑需要委派人员进驻，采集行为本质上没有变化，只是搬运量变大了。
  - 采集建筑的维护费包含旗下车辆的损耗
  
- 房屋
  - 家族基地 - 获得私人岛屿时自动分配
    - 储物，类似石炉那样画一个存储区，只不过这里是将物品搬运到家族基地，需要时（如建造建筑）也可以从中取出
    - 当发生储存或者取出事件时，如果由多个同一种类的物品都没有达到堆叠上限，则会自动合并，直到满足堆叠最大值。（比如木材堆叠上限75，现有一份45的木材，和一份56的木材，会自动合并成一份75的木材和一份26的木材）
  - 农田 - 可建造
    - 建造完成后自动发芽，经历一定周期后自然成熟
    - 收割、搬运粮食
  - 住宅 - 可建造
    - 用于增加家族的人口和回复体力
    - 基础是单人单间，
  - 市集
    - 之前规划已久的挂单交易功能，这部分也转换为界面上的功能按键。
    - 不能玄学交易，只能玄学下单。需要把货拉到市集或者把货从市集拉回家
  - 岛主府 
    - 买卖私人岛屿（打下未探索岛屿后可以拿去卖或者自己用）
    - 招募人才

- 小人
  - 主属性
    
    - 体质
    - 腕力
    - 敏捷
    
  - 副属性
  
    - 生命值 - 与体质正相关
    - 携带能力 - 与腕力正相关
    - 移动速度 - 与敏捷正相关
  
  - 当搬运的物品数量超过携带能力上限时，小人会优先将携带上限数量的物品搬运走，然后再回来搬运剩下的部分
  
  - 小人装备位：武器、头部、身体（给予生产工具额外的攻击属性让他也作为一种武器存在）
  
    
  
- 功能按键，常驻界面UI上的按键，可以快速呼出功能操作面板
  - 房屋建造 
    - 需要如开罗游戏的换地功能或者拆迁功能
  - 制造
  
- 物品

  - 堆叠上限
  
- 控制小人

  - 项目表：采集，搬运，建造

    [![BvC4nf.png](https://s1.ax1x.com/2020/11/11/BvC4nf.png)](https://imgchr.com/i/BvC4nf)

  - 划区域：采集区，搬运区

    [![BvCQXV.png](https://s1.ax1x.com/2020/11/11/BvCQXV.png)](https://imgchr.com/i/BvCQXV)






- 对抗与合作

  家族与家族之间根据友好度的数值分为：

  - 五档关系
    - 死敌：友好度 0 ~ 20
    - 仇视：友好度 21~ 40
    - 中立：友好度 41 ~ 70
    - 友善：友好度 71 ~ 90
    - 铁杆：友好度 90 ~ 100

  - 以下行为会扣除好感度
    - 攻击家族的成员被发现 
    - 抢夺家族货物被发现
  - 友好度：
    - 目前友好度先行用于过路费系统
      - 死敌：不予同行
      - 仇视：基础费用 * 150%
      - 中立：基础费用
      - 友善：基础费用 * 70%
      - 铁杆：免除费用

- 运输系统
  1. 市集拥有X辆运输车组成的车队，玩家或AI可以在卖货或买货时选择使用市集提供的货运服务。

  2. 市集车辆的收费由以下几个参数共同影响：
     - 运送货物的总价值
     - 车辆损耗费：sum（车辆在不同类型道路上的损耗系数 * 道路长度）
     - 路程费：sum（在单个车站内的路程长度 * 车站过路费）（过路费根据运送货物的家族与各个车站家族的关系，关系越好费用越低，反之可能连过都不给过。如果货物归属权和车站归属权属于同一个家族，那么将免除过路费）

     单程货运收费 = SUM ( 过路费基础定价 * 货主与过路家族关系系数 * 单条路程长度 ) 

     ​						   + SUM ( 车辆路况损耗系数 * 单条路程长度 ) * 运送货物总价值 * 10%

  3. 市集的车辆都只服务于单个用户，所以空车的情况也需要叫车者负担费用。空车的货物归属权指派给岛主所在家族。

  4. 系统分配给玩家岛屿时便会在岛屿内自动生成道路，将岛屿的各个出入口相连。道路采用最基础的材料且路线最短。

  5. 玩家需要建造【站台】才能获得道路的所有权，享有收费、改造道路、命名的权力。站台只能在属于自己的私人岛屿内兴建，一座私人岛屿只能建设一个站台。车辆只能在由【站台】的岛屿上停靠。（所以家里没有站台的话，车辆是没法直达家里的）

  6. 当车辆无法直接到达玩家所在岛屿时，玩家可以指定离自己最近的私人站台或公共岛屿的站台。

  7. 所有公共岛屿和未建设站台的私人岛屿上的道路，所有权归属岛主的家族。岛主与各个家族的初始好感度都默认为友善。

  8. 市集购买物品时可以虚空下单，车辆直接送出。或者指派市集车辆来自己家里取货【卖出物品时，可以选择市场运货或自己运货，以货运到市场的时价算卖出】当市集准备发车时，会给出两条参考路线，一个是时间最短，一个是金额最省，玩家可以选择且可以记忆选项。

  9. 玩家建设图纸中的道路改造包含：改进不同类型的路面材料，铺设直线型路块，铺设四分之一圆环型路块(可旋转方向)。道路需要维护，车辆过多也会损坏道路寿命。

  10. 玩家方图纸前期只能制造出人力载具，载荷和速度都有限。用来应付未开通站台时的货运任务。（后期考虑可以获得汽车制造图纸，但是发动汽车的汽油只有市场才买的到，定时定量刷新，很贵）

  11. 在玩家使用人力载具或人肉运输时，可以免费通行除了死敌关系家族控制岛屿之外的其他岛屿



### 暂时不能完善想到就写了的脑洞区 

- 事件：海盗袭击  
- 核心岛建筑=码头，外贸
- 在资源岛或私人岛上可能会出现纯度极高的资源元素，生命值长，每少100点生命就会掉落物品，可以采很久
- 在公共岛屿上盖碉堡堵路，霸占资源
- 招募人才特殊事件，最近听说海贼王的船在附近海域搁浅。。。。
- 市集无法玄学交易的埋点，提升负重，马车租赁，路上拦截，抢占最近岛屿建立仓库快速交易
- 建筑大部分是用于扩充制造和建造列表的图纸
- 增加食物多样性 - 捕鱼小屋（建筑，全自动捕鱼，通过不同的饵料或钓竿之类的提高渔获）
- 选定一个小人进入主角模式，可以按常规游戏那样控制它
- 类似石炉的天降地图，不确定中心岛的大小，中心岛可大可小，让玩家相信是他们的选择而不是被搞
- 不同地方的岛屿出产不同的原料，强行集中



