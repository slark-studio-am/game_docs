# 4.1 脚本合集

### 全图预设


- **配置项**
  - 地图大小 |  弹丸 普通 辽阔
  - 资源丰富度 | 影响工业区内资源地的数量 | 贫瘠、普通、丰富 | 注：当地图大小为【小】时，此项不可选择【丰富】



### 脚本

#### 概念：

1. 物品的归属权 | 由两部分组成【目标】-【位置】，目标可以是某个人或某个家族，位置可以是隶属于人或家族下的【仓库】或【背包】
2. 脚本-参数：指脚本在绑定实体时就已经设定好的数据
3. 脚本-传入参数：指脚本在运行过程中从UI界面或其他游戏内渠道获得的输入性的数据
4. 脚本-功能：指脚本在运行过程中所要实现的某些功能或者脚本代码中的某些方法



#### 绑定脚本：

- 【可进入】

  - 传入参数1：作用对象 
  - 参数1：触发实体编号 | 由单体建筑和门组成的预制体，触发的实体编号就是门实例的编号

  **当作用目标与触发实体发生碰撞时，作用对象将进入的绑定实体的内部，并在地图上消失**

  

- 【可交互】

  - 参数1：交互类型 | 

  

- 【可采集】

  - 参数1：采集位 | 指最多可容纳多少作用目标同时进行采集作业，当采集位满时，新加入的预采集单位需按照时间顺序排队等待
  - 参数2：标准采集时间 | 指单次采集所耗时间，所有关于挖掘的增益都以此作为基准
  - 参数3：采集产物&出产概率&单次出产数量区间的集合 | 指单次采集可能获得的所有出产物的概率以及出产数量区间
  - 参数4：触发方式 | 

  - 传入参数1：作用对象
  - 功能1：待采集队列 | 当采集位满时，后方的采集对象将按照时间顺序排队，等采集位有空缺时，到达时间最早的对象将优先补位
  - 功能2：单次出产物品合集 | 于采集过程中根据概率和数量区间生成单次出产哪些物品和物品的数量
  - 功能3：批量更改物品归属权 | 将单次出产物品合集内所有物品的归属权全部修改位作用对象的背包

  **一个绑定了【可采集】的实体被触发时，优先判断是否有空闲的采集位，如果有则开始采集，无则进入待采集队列等待采集位空缺。**

  **作用对象在经历一个标准采集时间后，即视为完成一次采集完成，空闲采集位+1。**

  **系统在采集过程中根据产物的种类概率数量生成对应数量的物品，并在采集结束后将这些物品的归属权更改为作用对象-背包**

  

- ·【可存储】

  - 参数1：最大存储数量
  - 传入参数1：作用对象
  - 传入参数2：指定物品和数量 | 选定需要存放或取出的物品及其数量
  - 功能1：批量更改物品归属权 | 将作用对象背包内的指定物品批量修改归属权为【作用对象家族】-【仓库】，此过程视为存放；将仓库内归属于作用对象家族的指定物品的归属权修改为【作用对象】-【背包】，此过程视为取出



- 【图纸】- 用于制造，比如三份铁制造一份锄头
  - 参数1：所有材料&所需数量的集合 |  制造出单份成品所需要的材料
  - 参数2：成品



- 【制造】

  - 参数1：图纸合集 | 指绑定了该脚本的实例可以制造哪些种类的图纸

  - 传入参数1：作用对象

  - 传入参数2：制造数量 | 制造物品的数量

  - 传入参数3：选定图纸 | 从图纸合集中选择一种进行制造

  - 功能1：销毁指定物品

    - 参数1：物品编号
    - 参数2：物品数量
    - 参数3：物品来源

  - 功能2：生成指定物品

    - 参数1：物品编号
    - 参数2：物品数量
    - 参数3：物品去处

    **根据以上图纸中阐明的所需要的材料和数量，以及选择制造的图纸和制造数量，将所需的材料从【作用对象】-【背包】中销毁，并生成图纸所示的成品到【作用对象】-【背包】中**



- 【可建造】
  - 参数1：建筑图纸合集 | 指绑定了该脚本的实例可以制造哪些建筑
  - 传入参数1：作用对象
  - 传入参数2：选定图纸 | 从图纸合集中选择一种进行制造
  - 功能1：销毁指定物品
    - 参数1：物品编号
    - 参数2：物品数量
    - 参数3：物品来源
  - 功能2：生成指定物品
    - 参数1：物品编号



- 【提供人口】

  - 参数1：容纳上限 | 可以提供的人口数量

    




矿洞、林场：【可采集的】

仓库：【可存储】

工厂：【制造】

木材加工、矿石加工：【制造】

麦田：【可采集的】

民居：【提供人口】【可升级的】

空地：【可建造】