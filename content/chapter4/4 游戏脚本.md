# 4.游戏脚本





草稿暂存



### 制造器

- data：

  - 图纸集 | 指该实体可以制造哪些种类的图纸

- UI模板控件：

  - [![BWFdzt.png](https://s1.ax1x.com/2020/11/05/BWFdzt.png)](https://imgchr.com/i/BWFdzt)

    包含

    - 带滚动条的图纸列表，带成品展示，可供选择指定的图纸

    - 选中图纸的成品展示图

    - 制造成品所需材料的列表，单个材料包含所需数量和持有数量，持有数量为制造发起者背包内所拥有的该材料数量。当某一种材料数量不足时，应给予提示

    - 可制作成品数量选择。当选中某一具体图纸时，系统会根据背包内所含材料的数量，给出最大可制造数量，制造发起者可以在1到最大可制造数量这个范围内调整制作数量

    - 制造按键。点击后，系统将根据所选择的图纸和制造数量制作出物品放入制作发起者的背包，并扣除相应数量的材料

      


- 【存储】

  - data： 

    - 最大储量 | 指有多少储存空间
    - 存储类型 | 指可以存放金存储空间的物品类型，如无限制则不填

  - action：

    - 动作描述：

      当存储的ui面板被触发时，触发者的背包也被一并展示出来，存储面板在画面左侧，触发者背包在画面右侧。

      触发者可以通过点击鼠标右键将背包中的物品转移到储存格中，也可以将储存格中的物品转移到自己的背包中

      当移动的物品数量>1时，会弹出选择物品数量的子窗口。也可以使用鼠标左键+shift组合键使全部数量的物品转移

      

  - UI模板控件

    [![BhU0C4.png](https://s1.ax1x.com/2020/11/06/BhU0C4.png)](https://imgchr.com/i/BhU0C4)

    包含

    - 根据面板的长宽，在固定每小格空间的长宽且预留其他控件位置的情况下，可规整摆放下最多的小格。比如示意图中的7X4个小格
    - 物品类型的分类标签控件，根据选择的标签，只展示出对应分类的物品
    - 整理按键，根据一定的规则将存储空间内的所有物品合理摆放
    - 翻页控件，根据单页小格数和数据参数中的最大储量，计算出页数



- 【是一栋建筑】
  - data：
    - 提供人口



- 【可建造的】

  - data：

    - 建筑图纸列表 | 指可以建造哪些建筑

      

- 【可升级的】

- 【简易商店】

- 【交易所】

 可采集（预想绑定元素：矿场，林场等）

- data：

  1. **可采集产物** | 可以被采集到的物品，可配置单个或多个物品
  2. **出产概率** | 在单次采集中，某个物品可能被采集到的概率，概率范围1% ~ 100%。当配置了多个可采集产物时，每个产物的出产概率都是独立的。（比如铁矿石，概率100%；镔铁矿石，概率30%，指在一次采集中，一定会获得铁矿石，由30%的概率会获得镔铁矿石）
  3. **单次出产数量区间** | 在单次采集中，某个被采集物品的数量区间（比如铁矿石，数量区间[25，35]，当这个物品确定会被采集到时，采集者获得的铁矿石数量将从[25，35]这个区间中随机产生）
  4. **标准采集时间** | 无任何附加BUFF或DEBUFF的情况下，从开始采集到结束采集所耗费的时间。所有的增益效果都以此标准时间作为基准。（比如标采时间为10s，有一个增益效果可以减少20%的采集时间，则采集者实际采集时间为8s）
  5. **绑定出入口** | 绑定某一个实体，以与该实体进行交互(具体程序制定，预想是碰撞)后视为一次采集开始

- action：

  动作描述：（设想中的采集动画是魔兽人族采金矿，人进去出来就有东西了）

  1. 通过鼠标右键选定绑定了【可采集】的实体，单位自动移动并寻找到【出入口】，与其交互后单位消失在地图上并视为开始采集。（此处需要有一个进门后触发开始采集的设置，两个组件之间的连接）
  2. 开始采集即开始计时，计时满一个标准采集时间后，系统根据产物配置以及对应的出产概率和出产数量，生成相应产物，并临时存放在单位身上的背包*（此处原先设想确实不合理，先维持原判，标记等待全盘串联后确认说法）*
  3. 产物分配结束后视为一次采集结束，单位重新出现在地图上，并将获得的产物搬运到家族基地或仓库中。（*此处的仓库指的是在预想中矿洞或林场旁边有公共仓库可供租用，减少搬运往基地的路途，标记等待全盘串联后确认说法）*

- 备注：

  1. 绑定了【可采集】的实体，视为可凭空产生物品的设定，无剩余资源或资源枯竭的说法。
  2. 可采集产物、出产概率、单次出产数量区间者三个数据集之间必须是有一一对应关系的（比如a[0]对应b[0]、c[0]），或者将三者杂糅在一起，即一个子集内包含产物概率、数量，多个子集共同合成为一个出产物列表，此处根据程序自己的想法进行合理选择配置。



- 【可交互】

  - data：

    - **交互类型** | 指触发之后以何种形式与玩家交互 |【面板】【对话框】【事件】

    - **触发类型** | 指玩家通过何种操作可以触发交互 | 【按键】【区域】【碰撞】

      - 触发区域范围 | 指触发类型为区域的在靠近绑定实体多少范围内触发 | 数值
      - 按键触发方式 | 指定某个快捷键作为触发按键，以及指定一个范围，当处于这个范围内且按下指定快捷键才能触发按键交互

    - **触发提示范围** | 指玩家在靠近绑定实体多少范围内将被提示可交互，当指为0时视为不提示 | 数值

    - **绑定面板实体** | 指触发面板交互时，使用哪一套也绑定在同一实体上的组件UI模板控件，此组件可多选

    - **面板样式：**

      [![BhUd5F.png](https://s1.ax1x.com/2020/11/06/BhUd5F.png)](https://imgchr.com/i/BhUd5F)

      - 当绑定的实体拥有不止一套UI模板控件时，面板的右侧将出现标签选择，方便在不同的面板中切换



- 

